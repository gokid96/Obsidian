


| #   | ì»¬ëŸ¼            | í•„ë“œ                 | ë°ì´í„° ì†ŒìŠ¤                       | í‚¤/API                                                                                   |
| --- | ------------- | ------------------ | ---------------------------- | --------------------------------------------------------------------------------------- |
| 1   | Service       | `service`          | -                            | ì„œë¹„ìŠ¤ëª… (1A1, 1N ë“±)                                                                        |
| 2   | Type          | `type`             | ë¡œì§ íŒë‹¨                        | xaAMR Task + Handler ìƒíƒœ ì¡°í•©                                                              |
| 3   | Status        | `status`           | ë¡œì§ íŒë‹¨                        | xaAMR Task + Handler ìƒíƒœ ì¡°í•©                                                              |
| 4   | Connected     | `connectedTime`    | **Redis HGET** + **AMR API** | `AirlineMessageHandlerStatus` â†’ `ConnectedTime`<br>`AMR startedTime` -> `ConnectedTime` |
| 5   | Disconnected  | `disconnectedTime` | **Redis HGET**               | `AirlineMessageHandlerStatus` â†’ `DisconnectedTime`                                      |
| 6   | Last Received | `lastReceivedTime` | **Redis HGET**               | `AirlineMessageHandlerStatus` â†’ `LastReceivedTime`                                      |
| 9   | PAXLST        | `paxlstCount`      | **Redis HGET**               | `AirlineMessageHandlerStatus` â†’ `PAXLSTMessageCount`                                    |
| 10  | CUSRES        | `cusresCount`      | **Redis HGET**               | `AirlineMessageHandlerStatus` â†’ `CUSRESMessageCount`                                    |
| 11  | Error         | `errorCount`       | **Redis HGET**               | `AirlineMessageHandlerStatus` â†’ `Reject1MessageCount`                                   |
| 12  | Timeout       | `timeoutCount`     | **Redis HGET**               | `AirlineMessageHandlerStatus` â†’ `Reject2MessageCount`                                   |
| 13  | Processing    | `pendingCount`     | **backend**                  | PAXLST - CUSRES - error - Timeout                                                       |

## Type ê²°ì •

| xaAMR MQ | xaAMR MATIP | Redis Handler | Type          | Status    |
| -------- | ----------- | ------------- | ------------- | --------- |
| Running  | -           | -             | AMR-MQ        | Running   |
| Disabled | -           | ìˆìŒ            | Handler-MATIP | Connected |
| Disabled | -           | ì—†ìŒ            | AMR-MQ        | Disabled  |
| -        | Running     | -             | AMR-MATIP     | Running   |
| -        | Disabled    | ìˆìŒ            | Handler-MATIP | Connected |
| -        | Disabled    | ì—†ìŒ            | AMR-MATIP     | Disabled  |
| -        | -           | ìˆìŒ            | Handler-MATIP | Connected |


# API ì—”ë“œí¬ì¸íŠ¸ ì „ì²´ ì •ë¦¬ (ë°ì´í„°ì†ŒìŠ¤ í¬í•¨)

## ë°ì´í„°ì†ŒìŠ¤ ìš”ì•½

| ë°ì´í„°ì†ŒìŠ¤          | ìœ í˜•         | í˜¸ìŠ¤íŠ¸                    | ìš©ë„                          |
| -------------- | ---------- | ---------------------- | --------------------------- |
| `auth`         | PostgreSQL | 192.168.14.31:5010     | ì‚¬ìš©ì/ì¸ì¦, ARINC ì•ŒëŒ            |
| `iapp-kor`     | MySQL      | 192.168.100.151:3306   | ë©”ì‹œì§€ ì¡°íšŒ (APP-PROD)           |
| `pnr-kor`      | MySQL      | 192.168.100.21:3306    | PNR ë©”ì‹œì§€                     |
| `pfms`         | MySQL      | 192.168.90.151:3306    | PFMS ë°ì´í„°                    |
| `xaAMR`        | REST API   | 192.168.100.11~13:8443 | xaAMR ì‹œìŠ¤í…œ                   |
| `SSH`          | SSH        | 192.168.100.11~13:2770 | Handler Config, Immigration |
| `Alertmanager` | REST API   | 192.168.14.31:9093     | ì•ŒëŒ ì „ì†¡                       |

---

## 1. Auth API (`/api/auth`)

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`POST`|`/login`|ë¡œê·¸ì¸ (JWT ë°œê¸‰)|ğŸ˜ PostgreSQL (auth)|
|`POST`|`/refresh`|í† í° ê°±ì‹ |ğŸ˜ PostgreSQL (auth)|
|`GET`|`/me`|í˜„ì¬ ì‚¬ìš©ì ì •ë³´|ğŸ˜ PostgreSQL (auth)|
|`POST`|`/logout`|ë¡œê·¸ì•„ì›ƒ|- (Stateless)|

---

## 2. User API (`/api/users`)

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/`|ì „ì²´ ì‚¬ìš©ì ëª©ë¡|ğŸ˜ PostgreSQL (auth)|
|`GET`|`/{id}`|ì‚¬ìš©ì ìƒì„¸ ì¡°íšŒ|ğŸ˜ PostgreSQL (auth)|
|`POST`|`/`|ì‚¬ìš©ì ìƒì„±|ğŸ˜ PostgreSQL (auth)|
|`PUT`|`/{id}`|ì‚¬ìš©ì ìˆ˜ì •|ğŸ˜ PostgreSQL (auth)|
|`PUT`|`/{id}/password`|ë¹„ë°€ë²ˆí˜¸ ë³€ê²½|ğŸ˜ PostgreSQL (auth)|
|`DELETE`|`/{id}`|ì‚¬ìš©ì ì‚­ì œ|ğŸ˜ PostgreSQL (auth)|

---

## 3. Message API (`/api/messages`)

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`POST`|`/search`|ë©”ì‹œì§€ ê²€ìƒ‰ (ë¹ ë¦„)|ğŸ¬ MySQL (iapp-kor)|
|`POST`|`/stats`|ë©”ì‹œì§€ í†µê³„ (ëŠë¦¼)|ğŸ¬ MySQL (iapp-kor)|

---

## 4. ARINC Integrator API (`/api/arinc-integrator`)

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/alarms`|ì•ŒëŒ ëª©ë¡ ì¡°íšŒ|ğŸ˜ PostgreSQL (auth)|
|`GET`|`/alarms/{id}`|ì•ŒëŒ ìƒì„¸ ì¡°íšŒ|ğŸ˜ PostgreSQL (auth)|
|`POST`|`/broker-alarms`|Vector ì•ŒëŒ ìˆ˜ì‹ |ğŸ˜ PostgreSQL (auth) + ğŸ”” Alertmanager|
|`GET`|`/queue-status`|Alertmanager í ìƒíƒœ|ğŸ’¾ In-Memory (Queue)|
|`POST`|`/test-alert`|í…ŒìŠ¤íŠ¸ ì•ŒëŒ ì „ì†¡|ğŸ”” Alertmanager|

---

## 5. Handler API (`/api/handler`)

### Config ê´€ë¦¬

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/config/{server}`|Config ì¡°íšŒ (íŒŒì‹±)|ğŸ” SSH â†’ YAML íŒŒì¼|
|`GET`|`/config/{server}/raw`|Config ì›ë³¸ ì¡°íšŒ|ğŸ” SSH â†’ YAML íŒŒì¼|
|`PUT`|`/config/{server}/raw`|Config ì €ì¥|ğŸ” SSH â†’ YAML íŒŒì¼|

### Process ì œì–´

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/process/{server}/status`|ì „ì²´ í”„ë¡œì„¸ìŠ¤ ìƒíƒœ|ğŸ” SSH (ps ëª…ë ¹ì–´)|
|`GET`|`/process/{server}/{serviceName}/status`|íŠ¹ì • í”„ë¡œì„¸ìŠ¤ ìƒíƒœ|ğŸ” SSH (ps ëª…ë ¹ì–´)|
|`POST`|`/process/{server}/{serviceName}/start`|í”„ë¡œì„¸ìŠ¤ ì‹œì‘|ğŸ” SSH (kor-iapp-v3 start)|
|`POST`|`/process/{server}/{serviceName}/stop`|í”„ë¡œì„¸ìŠ¤ ì¤‘ì§€|ğŸ” SSH (kor-iapp-v3 stop)|
|`POST`|`/process/{server}/{serviceName}/restart`|í”„ë¡œì„¸ìŠ¤ ì¬ì‹œì‘|ğŸ” SSH (kor-iapp-v3 restart)|

---

## 6. xaAMR API (`/api/xaamr`)

### ì‹œìŠ¤í…œ ìƒíƒœ

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/status`|ì‹œìŠ¤í…œ ìƒíƒœ ìš”ì•½|ğŸŒ xaAMR REST API|
|`GET`|`/process`|ì „ì²´ ì„œë²„ ìƒíƒœ|ğŸŒ xaAMR REST API (prod1+prod2+test)|

### MATIP

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/matip`|MATIP Broker ìƒíƒœ|ğŸŒ xaAMR REST API|
|`GET`|`/matip/config/{taskName}`|MATIP Task ì„¤ì •|ğŸŒ xaAMR REST API|

### MQSeries

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/mq`|MQSeriesToQueue ìƒíƒœ|ğŸŒ xaAMR REST API|
|`GET`|`/mq-out`|QueueToMQSeries ìƒíƒœ|ğŸŒ xaAMR REST API|
|`GET`|`/mq/config/input/{taskName}`|MQ ì…ë ¥ ì„¤ì •|ğŸŒ xaAMR REST API|
|`GET`|`/mq/config/output/{taskName}`|MQ ì¶œë ¥ ì„¤ì •|ğŸŒ xaAMR REST API|

### Node.js

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/nodejs-in`|QueueToNodeJs ìƒíƒœ|ğŸŒ xaAMR REST API|
|`GET`|`/nodejs-out`|NodejsToQueue ìƒíƒœ|ğŸŒ xaAMR REST API|
|`GET`|`/scripts/nodejs-to-queue`|ìŠ¤í¬ë¦½íŠ¸ ëª©ë¡|ğŸŒ xaAMR REST API|
|`GET`|`/scripts/queue-to-nodejs`|ìŠ¤í¬ë¦½íŠ¸ ëª©ë¡|ğŸŒ xaAMR REST API|
|`GET`|`/scripts/nodejs-to-queue/{name}`|ìŠ¤í¬ë¦½íŠ¸ ìƒì„¸|ğŸŒ xaAMR REST API|
|`GET`|`/scripts/queue-to-nodejs/{name}`|ìŠ¤í¬ë¦½íŠ¸ ìƒì„¸|ğŸŒ xaAMR REST API|

### File Tasks

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/file-to-queue`|FileToQueue ìƒíƒœ|ğŸŒ xaAMR REST API|
|`GET`|`/queue-to-file`|QueueToFile ìƒíƒœ|ğŸŒ xaAMR REST API|
|`GET`|`/file-to-queue/config/{taskName}`|FileToQueue ì„¤ì •|ğŸŒ xaAMR REST API|
|`GET`|`/queue-to-file/config/{taskName}`|QueueToFile ì„¤ì •|ğŸŒ xaAMR REST API|

### Queue ê´€ë¦¬

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/queues`|Queue ëª©ë¡|ğŸŒ xaAMR REST API|
|`GET`|`/queue-names`|Queue ì´ë¦„ ëª©ë¡|ğŸŒ xaAMR REST API|

---

## 7. Immigration API (`/api/immigration`)

|Method|Endpoint|ì„¤ëª…|ë°ì´í„°ì†ŒìŠ¤|
|---|---|---|---|
|`GET`|`/status`|ì „ì²´ ì„œë²„ ìƒíƒœ|ğŸ” SSH (ps ëª…ë ¹ì–´)|
|`GET`|`/status/{server}`|íŠ¹ì • ì„œë²„ ìƒíƒœ|ğŸ” SSH (ps ëª…ë ¹ì–´)|
|`POST`|`/refresh`|ìƒíƒœ ê°±ì‹ |ğŸ” SSH (ps ëª…ë ¹ì–´)|

---

## ğŸ“Š ë°ì´í„°ì†ŒìŠ¤ë³„ ìš”ì•½

|        | ë°ì´í„°ì†ŒìŠ¤        | ì—”ë“œí¬ì¸íŠ¸ ìˆ˜ | ìš©ë„                           |
| ------ | ------------ | ------- | ---------------------------- |
|        | PostgreSQL   | 12      | ì‚¬ìš©ì, ì¸ì¦, ì•ŒëŒ                  |
|        | MySQL        | 2       | ë©”ì‹œì§€ ê²€ìƒ‰/í†µê³„                    |
|        | xaAMR REST   | 22      | ë¯¸ë“¤ì›¨ì–´ ëª¨ë‹ˆí„°ë§                    |
|        | SSH          | 11      | Config, Process, Immigration |
|        | Alertmanager | 2       | ì•ŒëŒ ì „ì†¡                        |
|        | In-Memory    | 1       | í ìƒíƒœ                         |
| **ì´ê³„** |              | **50ê°œ** |                              |