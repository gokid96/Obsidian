## PDU (Protocol Data Unit)
각 계층에서 처리하는 데이터 단위

|계층|PDU 이름|설명|
|---|---|---|
|L7~L5|Data / Message|애플리케이션 데이터|
|L4|Segment (TCP) / Datagram (UDP)|포트 정보 포함|
|L3|Packet|IP 주소 포함|
|L2|Frame|MAC 주소 포함|
|L1|Bit|전기/광 신호|

## 데이터 캡슐화 (Encapsulation)

```
송신 측 (위 → 아래)
┌─────────────────────────────────────────┐
│ Application  │ Data                     │
├──────────────┼──────────────────────────┤
│ Transport    │ TCP Header + Data        │  ← Segment
├──────────────┼──────────────────────────┤
│ Network      │ IP Header + Segment      │  ← Packet
├──────────────┼──────────────────────────────┤
│ Data Link    │ Frame Header + Packet + FCS │← Frame
├──────────────┼──────────────────────────────┤
│ Physical     │ 010110101...              │  ← Bits
└──────────────┴──────────────────────────────┘
```

수신 측은 역순으로 역캡슐화 (Decapsulation)

## 계층별 헤더 정보

|계층|헤더에 포함되는 주요 정보|
|---|---|
|L2|출발/목적지 MAC, 타입, FCS(오류검출)|
|L3|출발/목적지 IP, TTL, 프로토콜|
|L4|출발/목적지 Port, 시퀀스 번호, 플래그|

## 웹 요청 예시로 보는 계층별 동작

```
브라우저에서 https://google.com 접속 시:

L7(응용): HTTP 요청 생성 "GET / HTTP/1.1"
L6(표현): TLS 암호화
L5(세션): TCP 세션 관리
L4(전송): TCP 세그먼트 (출발 Port:52000, 목적 Port:443)
L3(네트워크): IP 패킷 (출발 IP → 목적 IP)
L2(데이터링크): 이더넷 프레임 (MAC 주소)
L1(물리): 전기 신호로 전송
```

## 트러블슈팅 시 계층별 확인

```bash
# L1: 물리 연결 확인
ethtool eth0

# L2: MAC 테이블, ARP
arp -a
ip neigh

# L3: IP, 라우팅
ip addr
ip route
ping [IP]

# L4: 포트, 연결 상태
ss -tuln
nc -zv [IP] [Port]

# L7: 애플리케이션 레벨
curl -v http://example.com
```