검색을 빠르게 하려고 만드는 자료구조. 책 맨 뒤 색인(찾아보기)이랑 같은 개념

---

### 인덱스 없으면?

```sql
SELECT * FROM user WHERE name = '철수';
```

100만 행이면 처음부터 끝까지 다 뒤짐 → **Full Scan** → 느림

---

### 인덱스 있으면?

name에 인덱스 걸어두면 바로 찾음 → 훨씬 빠름

```sql
CREATE INDEX idx_name ON user(name);
```

---

### B-Tree 구조

대부분 DB가 쓰는 인덱스 구조
```
        [M]
       /   \
    [D,H]  [P,T]
    / | \   / | \
   A  E  J N  R  W
````

- 정렬된 트리 구조
- 탐색할 때 반씩 쪼개면서 찾음 → O(log N)
- 100만 개여도 약 20번이면 찾음

---

### 언제 인덱스 걸어?

**걸면 좋은 경우**

- WHERE에 자주 쓰는 컬럼
- JOIN 조건에 쓰는 컬럼
- ORDER BY에 쓰는 컬럼

**안 걸어도 되는 경우**

- 데이터 적은 테이블
- 값이 거의 다 똑같은 컬럼 (예: 성별)
- INSERT/UPDATE 엄청 많은 테이블 (인덱스 유지 비용)

---

### 주의점

- 인덱스도 저장 공간 차지함
- 데이터 변경될 때마다 인덱스도 갱신 → 쓰기 느려질 수 있음
- 많이 건다고 좋은 게 아님

---

### 클러스터드 vs 논클러스터드

|종류|설명|
|---|---|
|클러스터드|테이블 자체가 인덱스 순서로 정렬됨. PK에 자동 생성. 테이블당 1개|
|논클러스터드|별도 인덱스 테이블. 여러 개 가능|

---

### 정리

|개념|설명|
|---|---|
|인덱스|검색 빠르게 하는 자료구조|
|B-Tree|정렬된 트리, O(log N)|
|클러스터드|테이블 자체 정렬, PK|
|논클러스터드|별도 인덱스, 여러 개 가능|