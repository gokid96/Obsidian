하나의 작업 단위. 전부 성공하거나 전부 실패해야 함

---

예시:계좌이체
철수 -> 영희에게 10만원 보내기
```sql
	UPDATE account SET balance = balance - 100000 WHERE name = '철수';
	UPDATE account SET balance = balance + 100000 WHERE name = '영희';
```
첫 번째만 실행되고 서버 터지면? 철수 돈만 사라짐
-> 둘 다 성공하거나, 둘 다 취소해야 함
-> 이걸 트랜잭션으로 묶음
```sql
BEGIN;
UPDATE account SET balance = balance - 100000 WHERE name = '철수';
UPDATE account SET balance = balance + 100000 WHERE name = '영희';
COMMIT;
```
중간에 문제 생기면 ROLLBACK으로 전부 취소

---
### ACID
트랜잭션이 지켜야 할 4가지 속성

|속성|의미|
|---|---|
|**A**tomicity (원자성)|전부 성공 or 전부 실패|
|**C**onsistency (일관성)|트랜잭션 전후로 DB가 유효한 상태 유지|
|**I**solation (격리성)|트랜잭션끼리 서로 간섭 안 함|
|**D**urability (지속성)|커밋되면 영구 저장 (서버 꺼져도 유지)|
### COMMIT / ROLLBACK

- **COMMIT**: 변경사항 확정 저장
- **ROLLBACK**: 변경사항 취소, 트랜잭션 시작 전으로 되돌림

```sql
BEGIN;
DELETE FROM user WHERE id = 1;
-- 어 잘못했다
ROLLBACK;  -- 삭제 취소됨
```

---
### 격리 수준 (Isolation Level)

격리성을 얼마나 엄격하게 지킬지 정한 단계.

| 수준               | 설명                            |
| ---------------- | ----------------------------- |
| Read Uncommitted | 커밋 안 된 것도 읽음 (거의 안 씀)         |
| Read Committed   | 커밋된 것만 읽음 (Oracle 기본)         |
| Repeatable Read  | 트랜잭션 시작 시점 기준으로 읽음 (MySQL 기본) |
| Serializable     | 완전 직렬 실행처럼 동작 (가장 느림)         |

높을수록 안전하지만 성능 비용 있음.

### 정리

| 용어       | 의미                 |
| -------- | ------------------ |
| 트랜잭션     | 하나의 작업 단위          |
| COMMIT   | 확정                 |
| ROLLBACK | 취소                 |
| ACID     | 원자성, 일관성, 격리성, 지속성 |

