

## JDBC (Java Database Connectivity)

### JDBC 개요

- 자바에서 데이터베이스에 접근하기 위한 저수준 API
- 직접적인 SQL 쿼리 실행
- 모든 데이터베이스 작업을 개발자가 직접 제어

### JDBC 사용 예시

```java
public class UserRepository {
    public User findUserById(Long id) {
        Connection conn = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;
        
        try {
            // 데이터베이스 연결
            conn = DriverManager.getConnection(URL, USER, PASSWORD);
            
            // SQL 쿼리 준비
            String sql = "SELECT * FROM users WHERE id = ?";
            pstmt = conn.prepareStatement(sql);
            pstmt.setLong(1, id);
            
            // 쿼리 실행
            rs = pstmt.executeQuery();
            
            // 결과 매핑
            if (rs.next()) {
                User user = new User();
                user.setId(rs.getLong("id"));
                user.setName(rs.getString("username"));
                user.setEmail(rs.getString("email"));
                return user;
            }
        } catch (SQLException e) {
            // 예외 처리
            e.printStackTrace();
        } finally {
            // 리소스 정리
            try {
                if (rs != null) rs.close();
                if (pstmt != null) pstmt.close();
                if (conn != null) conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
        return null;
    }
}
```

### JDBC의 특징

- 저수준 데이터베이스 접근
- 모든 과정을 개발자가 직접 제어
- 성능 최적화에 유리
- 코드 복잡성 높음

## JPA (Java Persistence API)

### JPA 개요

- 객체와 관계형 데이터베이스를 매핑하는 ORM 표준
- 개발자 대신 데이터베이스 작업 추상화
- 객체지향적 데이터 접근 방식

### JPA 사용 예시

```java
@Repository
public class UserRepository {
    @PersistenceContext
    private EntityManager entityManager;
    
    public User findUserById(Long id) {
        // 간단한 메서드 호출로 데이터베이스 조회
        return entityManager.find(User.class, id);
    }
    
    @Transactional
    public void saveUser(User user) {
        // 객체 저장이 간단한 메서드 호출로 가능
        entityManager.persist(user);
    }
}
```

### JPA의 특징

- 객체지향적 데이터 접근
- 반복적인 JDBC 코드 제거
- 자동 쿼리 생성
- 캐시 메커니즘 제공

## 주요 차이점 비교

### 1. 코드 복잡성

- JDBC: 상세한 데이터베이스 처리 로직 직접 작성
- JPA: 추상화된 메서드로 간단한 데이터베이스 작업

### 2. 성능

- JDBC: 직접 최적화 가능, 성능 제어 용이
- JPA: 프레임워크 최적화, 대부분의 경우 충분한 성능

### 3. 개발 생산성

- JDBC: 모든 작업을 직접 구현
- JPA: 반복적인 코드 제거, 빠른 개발 가능

### 4. 데이터베이스 독립성

- JDBC: 데이터베이스별 세부 구현 필요
- JPA: 데이터베이스 변경에 유연

## 성능 최적화 비교

### JDBC 성능 최적화

```java
// 배치 처리
public void batchInsert(List<User> users) {
    Connection conn = null;
    PreparedStatement pstmt = null;
    
    try {
        conn = DriverManager.getConnection(URL, USER, PASSWORD);
        conn.setAutoCommit(false);
        
        String sql = "INSERT INTO users (name, email) VALUES (?, ?)";
        pstmt = conn.prepareStatement(sql);
        
        for (User user : users) {
            pstmt.setString(1, user.getName());
            pstmt.setString(2, user.getEmail());
            pstmt.addBatch();
        }
        
        pstmt.executeBatch();
        conn.commit();
    } catch (SQLException e) {
        // 예외 처리
    }
}
```

### JPA 성능 최적화

```java
@Transactional
public void batchInsert(List<User> users) {
    for (int i = 0; i < users.size(); i++) {
        entityManager.persist(users.get(i));
        
        // 일정 주기로 flush and clear
        if (i % 20 == 0) {
            entityManager.flush();
            entityManager.clear();
        }
    }
}

// 벌크 연산
public void bulkUpdateUsers() {
    entityManager.createQuery("UPDATE User u SET u.status = :status")
                 .setParameter("status", "INACTIVE")
                 .executeUpdate();
}
```

## 언제 무엇을 선택할까?

### JDBC 사용 추천

- 매우 복잡한 쿼리 필요
- 극단적인 성능 최적화 요구
- 데이터베이스 고유 기능 직접 사용

### JPA 사용 추천

- 객체지향적 설계 필요
- 빠른 개발 속도 중요
- 일반적인 CRUD 작업
- 데이터베이스 변경 가능성

## 결론

JDBC와 JPA는 각자의 장단점이 있습니다. 프로젝트의 특성과 요구사항에 맞는 기술을 선택하는 것이 중요합니다. 대부분의 경우 JPA로 충분하며, 성능이 중요한 부분은 부분적으로 최적화할 수 있습니다.