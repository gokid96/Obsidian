### 폴더 이동 시 순환 참조 방지 **문제** 
```
폴더 A를 자신의 하위 폴더 B로 이동 시 무한 루프 발생 가능 
**해결 과정:** 
1차 시도: 직접 자식만 체크 → 손자, 증손자는 막지 못함 
2차 시도: 모든 자식 재귀 조회 → 쿼리 폭증 문제 
최종 해결: 부모 체인 역순 탐색 → O(depth) 복잡도, 쿼리 0회 
**코드:** [GitHub 링크] 

**결과:** depth 10인 폴더도 1ms 이내 검증 완료
```

``` java
// parent가 folder의 하위(자손)인지 체크  
Folder current = parent.getParent();  
while (current != null) {  
    if (current.getFolderId().equals(folderId)) {  
        throw new IllegalArgumentException("하위 폴더로는 이동할 수 없습니다.");  
    }  
    current = current.getParent();  
}
```