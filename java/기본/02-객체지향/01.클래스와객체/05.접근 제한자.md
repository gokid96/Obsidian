# 접근 제한자 (Access Modifier)

## 접근 제한자란?
- 클래스, 필드, 메서드의 **접근 범위** 설정
- **캡슐화**의 핵심 도구
- 정보 은닉과 데이터 보호

---

## 접근 제한자 종류

| 제한자 | 같은 클래스 | 같은 패키지 | 자식 클래스 | 전체 |
|--------|:-----------:|:-----------:|:-----------:|:----:|
| `public` | ✅ | ✅ | ✅ | ✅ |
| `protected` | ✅ | ✅ | ✅ | ❌ |
| `(default)` | ✅ | ✅ | ❌ | ❌ |
| `private` | ✅ | ❌ | ❌ | ❌ |

### 범위 순서
```
private < default < protected < public
  좁음 ─────────────────────────► 넓음
```

---

## public

### 어디서든 접근 가능
```java
public class Person {
    public String name;
    
    public void sayHello() {
        System.out.println("Hello!");
    }
}

// 다른 패키지에서도 접근 가능
Person p = new Person();
p.name = "홍길동";
p.sayHello();
```

### 사용 시점
- 외부에 공개할 API
- 라이브러리의 공개 인터페이스

---

## private

### 같은 클래스에서만 접근
```java
public class BankAccount {
    private int balance;  // 외부 접근 불가
    
    public void deposit(int amount) {
        if (amount > 0) {
            balance += amount;  // 내부에서는 접근 가능
        }
    }
    
    public int getBalance() {
        return balance;  // Getter로 제공
    }
}

// 외부
BankAccount account = new BankAccount();
// account.balance = 1000;  // 에러! private
account.deposit(1000);      // OK - 메서드 통해 접근
```

### 사용 시점
- 외부에 노출하면 안 되는 데이터
- 내부 구현 상세

---

## default (package-private)

### 같은 패키지에서만 접근
- 접근 제한자 생략 시 적용

```java
// com.example 패키지
class Helper {  // default 클래스
    int value;  // default 필드
    
    void process() {  // default 메서드
        // ...
    }
}

// 같은 패키지 (com.example)
Helper h = new Helper();  // OK

// 다른 패키지 (com.other)
// Helper h = new Helper();  // 에러!
```

### 사용 시점
- 패키지 내부에서만 사용하는 클래스
- 패키지 레벨 모듈화

---

## protected

### 같은 패키지 + 자식 클래스
```java
// com.example 패키지
public class Parent {
    protected int value;
    
    protected void process() {
        // ...
    }
}

// com.other 패키지
public class Child extends Parent {
    void test() {
        value = 10;  // OK - 자식 클래스
        process();   // OK
    }
}

// com.other 패키지 (상속 관계 아님)
public class Other {
    void test() {
        Parent p = new Parent();
        // p.value = 10;  // 에러! 다른 패키지
    }
}
```

### 사용 시점
- 상속 관계에서 자식에게만 공개
- 확장 포인트 제공

---

## 클래스 접근 제한

### public 클래스
```java
// Person.java
public class Person {  // 다른 패키지에서 사용 가능
    // ...
}
```

### default 클래스
```java
// Helper.java
class Helper {  // 같은 패키지에서만 사용 가능
    // ...
}
```

### 규칙
- **public 클래스**는 파일당 **하나만**
- 파일명 = public 클래스명
- 중첩 클래스는 private/protected 가능

---

## Getter와 Setter

### 캡슐화 패턴
```java
public class Person {
    private String name;
    private int age;
    
    // Getter
    public String getName() {
        return name;
    }
    
    public int getAge() {
        return age;
    }
    
    // Setter (유효성 검사 포함)
    public void setName(String name) {
        if (name != null && !name.isEmpty()) {
            this.name = name;
        }
    }
    
    public void setAge(int age) {
        if (age >= 0 && age <= 150) {
            this.age = age;
        }
    }
}
```

### boolean Getter
```java
private boolean active;

// isXxx() 형태
public boolean isActive() {
    return active;
}
```

### 장점
- **유효성 검사** 가능
- **읽기 전용** 구현 (Getter만)
- **쓰기 전용** 구현 (Setter만)
- 내부 구현 변경 시 **외부 영향 최소화**

---

## 실전 예제

### 학생 클래스
```java
public class Student {
    // private 필드
    private String id;
    private String name;
    private int score;
    
    // 생성자
    public Student(String id, String name) {
        this.id = id;
        this.name = name;
        this.score = 0;
    }
    
    // Getter
    public String getId() {
        return id;
    }
    
    public String getName() {
        return name;
    }
    
    public int getScore() {
        return score;
    }
    
    // Setter (제한적)
    public void setScore(int score) {
        if (score >= 0 && score <= 100) {
            this.score = score;
        } else {
            throw new IllegalArgumentException("점수는 0~100 사이");
        }
    }
    
    // id는 변경 불가 (Setter 없음)
}
```

### 계좌 클래스
```java
public class Account {
    private String accountNumber;
    private String owner;
    private int balance;
    
    public Account(String accountNumber, String owner) {
        this.accountNumber = accountNumber;
        this.owner = owner;
        this.balance = 0;
    }
    
    // Getter만 (읽기 전용)
    public String getAccountNumber() {
        return accountNumber;
    }
    
    public String getOwner() {
        return owner;
    }
    
    public int getBalance() {
        return balance;
    }
    
    // balance는 메서드를 통해서만 변경
    public void deposit(int amount) {
        if (amount > 0) {
            balance += amount;
        }
    }
    
    public boolean withdraw(int amount) {
        if (amount > 0 && balance >= amount) {
            balance -= amount;
            return true;
        }
        return false;
    }
}
```

---

## 접근 제한자 선택 가이드

### 필드
```java
// 거의 항상 private
private int value;
```

### 메서드
```java
// 외부 공개 API
public void doSomething() { }

// 내부 헬퍼 메서드
private void helperMethod() { }

// 자식 클래스용 확장 포인트
protected void onEvent() { }
```

### 클래스
```java
// 라이브러리 공개 클래스
public class MyLibrary { }

// 패키지 내부 헬퍼
class InternalHelper { }
```

---

## 주의사항

### 1. private 필드 + public Getter
```java
// 좋은 패턴
private List<String> items = new ArrayList<>();

// 방어적 복사 고려
public List<String> getItems() {
    return new ArrayList<>(items);  // 복사본 반환
}
```

### 2. 불변 객체
```java
public final class ImmutablePerson {
    private final String name;
    private final int age;
    
    public ImmutablePerson(String name, int age) {
        this.name = name;
        this.age = age;
    }
    
    public String getName() { return name; }
    public int getAge() { return age; }
    // Setter 없음
}
```

---

> [!tip] 핵심 정리
> - **public**: 어디서든 접근
> - **protected**: 같은 패키지 + 자식 클래스
> - **default**: 같은 패키지만
> - **private**: 같은 클래스만
> - 필드는 **private**, 메서드로 접근
> - **Getter/Setter**로 캡슐화 구현

---

#Java #객체지향 #접근제한자 #캡슐화 #Getter #Setter
