## 생성자란?
- 객체 생성 시 **자동 호출**되는 특수 메서드
- 객체의 **초기화** 담당
- **클래스명과 동일**, 반환 타입 없음

---

## 기본 생성자

### 자동 제공
- 생성자를 정의하지 않으면 컴파일러가 자동 생성
- **기본 생성자(Default Constructor)**: 매개변수 없음

```java
public class Person {
    String name;
    int age;
    // 기본 생성자 자동 생성
    // public Person() { }
}

// 사용
Person p = new Person();  // 기본 생성자 호출
```

### 주의
- 다른 생성자를 정의하면 **기본 생성자 자동 생성 안 됨**

```java
public class Person {
    String name;
    
    // 매개변수 있는 생성자만 정의
    Person(String name) {
        this.name = name;
    }
}

// Person p = new Person();  // 에러! 기본 생성자 없음
Person p = new Person("홍길동");  // OK
```

---

## 생성자 정의

### 기본 형식
```java
public class 클래스명 {
    클래스명() {
        // 초기화 코드
    }
    
    클래스명(매개변수) {
        // 초기화 코드
    }
}
```

### 예시
```java
public class Person {
    String name;
    int age;
    
    // 기본 생성자
    Person() {
        name = "무명";
        age = 0;
    }
    
    // 매개변수 있는 생성자
    Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
}
```

---

## 생성자 오버로딩

### 여러 생성자 정의
```java
public class Person {
    String name;
    int age;
    String address;
    
    // 기본 생성자
    Person() {
        this.name = "무명";
        this.age = 0;
        this.address = "미정";
    }
    
    // 이름만
    Person(String name) {
        this.name = name;
        this.age = 0;
        this.address = "미정";
    }
    
    // 이름, 나이
    Person(String name, int age) {
        this.name = name;
        this.age = age;
        this.address = "미정";
    }
    
    // 전체
    Person(String name, int age, String address) {
        this.name = name;
        this.age = age;
        this.address = address;
    }
}
```

### 사용
```java
Person p1 = new Person();
Person p2 = new Person("홍길동");
Person p3 = new Person("김철수", 25);
Person p4 = new Person("이영희", 30, "서울");
```

---

## this() - 생성자 호출

### 다른 생성자 호출
- 생성자 내에서 다른 생성자 호출
- **반드시 첫 줄**에 작성

```java
public class Person {
    String name;
    int age;
    String address;
    
    Person() {
        this("무명", 0, "미정");  // 다른 생성자 호출
    }
    
    Person(String name) {
        this(name, 0, "미정");
    }
    
    Person(String name, int age) {
        this(name, age, "미정");
    }
    
    Person(String name, int age, String address) {
        this.name = name;
        this.age = age;
        this.address = address;
    }
}
```

### 장점
- 코드 중복 제거
- 유지보수 용이
- 초기화 로직 일원화

---

## 생성자에서의 초기화

### 필드 초기화 순서
```java
public class Example {
    int a = 10;  // 1. 필드 초기화
    int b;
    
    {
        b = 20;  // 2. 초기화 블록
    }
    
    Example() {
        a = 30;  // 3. 생성자
        b = 40;
    }
}

// 결과: a = 30, b = 40
```

### final 필드 초기화
```java
public class Person {
    final String ssn;  // 주민번호 - 변경 불가
    
    Person(String ssn) {
        this.ssn = ssn;  // 생성자에서만 초기화 가능
    }
}
```

---

## 접근 제한자

### public 생성자
```java
public class Person {
    public Person() {
        // 어디서든 객체 생성 가능
    }
}
```

### private 생성자
```java
public class Singleton {
    private static Singleton instance;
    
    // private: 외부에서 new 불가
    private Singleton() { }
    
    // 정적 메서드로만 객체 제공
    public static Singleton getInstance() {
        if (instance == null) {
            instance = new Singleton();
        }
        return instance;
    }
}

// Singleton s = new Singleton();  // 에러!
Singleton s = Singleton.getInstance();  // OK
```

### protected 생성자
```java
public class Parent {
    protected Parent() {
        // 같은 패키지 또는 자식 클래스에서만 생성 가능
    }
}
```

---

## 실전 예제

### 상품 클래스
```java
public class Product {
    private String name;
    private int price;
    private int stock;
    
    // 기본 생성자
    public Product() {
        this("미정", 0, 0);
    }
    
    // 이름만
    public Product(String name) {
        this(name, 0, 0);
    }
    
    // 이름, 가격
    public Product(String name, int price) {
        this(name, price, 0);
    }
    
    // 전체 (주 생성자)
    public Product(String name, int price, int stock) {
        this.name = name;
        this.price = price;
        this.stock = stock;
    }
    
    // Getter
    public String getName() { return name; }
    public int getPrice() { return price; }
    public int getStock() { return stock; }
}
```

### 빌더 패턴 (참고)
```java
public class Person {
    private String name;
    private int age;
    private String address;
    private String phone;
    
    private Person(Builder builder) {
        this.name = builder.name;
        this.age = builder.age;
        this.address = builder.address;
        this.phone = builder.phone;
    }
    
    public static class Builder {
        private String name;
        private int age;
        private String address;
        private String phone;
        
        public Builder name(String name) {
            this.name = name;
            return this;
        }
        
        public Builder age(int age) {
            this.age = age;
            return this;
        }
        
        public Builder address(String address) {
            this.address = address;
            return this;
        }
        
        public Builder phone(String phone) {
            this.phone = phone;
            return this;
        }
        
        public Person build() {
            return new Person(this);
        }
    }
}

// 사용
Person person = new Person.Builder()
    .name("홍길동")
    .age(25)
    .address("서울")
    .build();
```

---

## 주의사항

### 1. 반환 타입 없음
```java
// 올바른 생성자
Person() { }

// 잘못된 생성자 (메서드가 됨)
void Person() { }
```

### 2. this()는 첫 줄에
```java
Person(String name) {
    // System.out.println("생성");  // 에러!
    this(name, 0);  // 반드시 첫 줄
}
```

### 3. this()와 super() 동시 불가
```java
Child() {
    // this(10);   // 둘 중 하나만
    super();
}
```

---

> [!tip] 핵심 정리
> - **생성자**: 객체 생성 시 호출, 초기화 담당
> - **기본 생성자**: 생성자 없으면 자동 생성
> - **오버로딩**: 여러 생성자 정의 가능
> - **this()**: 다른 생성자 호출 (첫 줄에만)
> - **private 생성자**: 싱글톤, 유틸리티 클래스

---

#Java #객체지향 #생성자 #Constructor #this
