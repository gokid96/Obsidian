## 개요

- 객체의 **메모리 주소(참조값)**를 저장
- 실제 데이터는 **Heap 메모리**에 저장
- 기본값: `null`

---

## 기본 타입 vs 참조 타입

### 메모리 구조

```
[Stack]              [Heap]
┌─────────────┐      
│ int a = 10  │      
│   (값: 10)  │      
├─────────────┤      ┌─────────────┐
│ String s    │ ──→  │  "Hello"    │
│ (주소: @100)│      │   (@100)    │
└─────────────┘      └─────────────┘
```

### 비교

|구분|기본 타입|참조 타입|
|---|---|---|
|저장 값|실제 데이터|메모리 주소|
|메모리|Stack|Stack(주소) + Heap(데이터)|
|기본값|0, false 등|null|
|예시|int, double, char|String, 배열, 클래스|

### 비교 연산

```java
// 기본 타입: 값 비교
int a = 10;
int b = 10;
System.out.println(a == b);  // true (값이 같음)

// 참조 타입: 주소 비교
String s1 = new String("Hello");
String s2 = new String("Hello");
System.out.println(s1 == s2);      // false (주소가 다름)
System.out.println(s1.equals(s2)); // true (값이 같음)
```

---

## 참조 타입의 종류

### 1. 문자열 (String)

```java
// 리터럴 방식 (String Pool 사용)
String s1 = "Hello";
String s2 = "Hello";
System.out.println(s1 == s2);  // true (같은 주소)

// new 방식 (새 객체 생성)
String s3 = new String("Hello");
String s4 = new String("Hello");
System.out.println(s3 == s4);  // false (다른 주소)
```

### 2. 배열 (Array)

```java
int[] arr1 = {1, 2, 3};
int[] arr2 = new int[3];
String[] names = {"Kim", "Lee", "Park"};
```

### 3. 클래스 (Class)

```java
class Person {
    String name;
    int age;
}

Person p1 = new Person();
Person p2 = new Person();
```

### 4. 인터페이스 (Interface)

```java
List<String> list = new ArrayList<>();
Map<String, Integer> map = new HashMap<>();
```

### 5. 열거형 (Enum)

```java
enum Day { MON, TUE, WED, THU, FRI, SAT, SUN }
Day today = Day.MON;
```

---

## null

### null이란?

- 참조 타입 변수가 **아무 객체도 참조하지 않음**을 나타냄
- 기본 타입에는 사용 불가

```java
String str = null;       // OK
int num = null;          // 컴파일 에러!
```

### NullPointerException (NPE)

```java
String str = null;
System.out.println(str.length());  // NPE 발생!

// 안전한 처리
if (str != null) {
    System.out.println(str.length());
}

// Java 8+: Optional 사용
Optional<String> opt = Optional.ofNullable(str);
opt.ifPresent(s -> System.out.println(s.length()));
```

### null 체크 방법

```java
// 1. if문
if (str != null) { ... }

// 2. Objects.isNull() / nonNull() (Java 8+)
if (Objects.nonNull(str)) { ... }
if (Objects.isNull(str)) { ... }

// 3. 삼항 연산자
String result = (str != null) ? str : "default";

// 4. Objects.requireNonNullElse() (Java 9+)
String result = Objects.requireNonNullElse(str, "default");
```

---

## String 상세

### String Pool (문자열 상수 풀)

```java
String s1 = "Hello";  // String Pool에 저장
String s2 = "Hello";  // 같은 객체 재사용
String s3 = new String("Hello");  // 새 객체 (Heap)

System.out.println(s1 == s2);   // true
System.out.println(s1 == s3);   // false
System.out.println(s1.equals(s3));  // true
```

```
[Stack]          [Heap]
┌──────┐         ┌─────────────────┐
│  s1  │────┐    │   String Pool   │
├──────┤    │    │  ┌───────────┐  │
│  s2  │────┴───→│  │  "Hello"  │  │
├──────┤         │  └───────────┘  │
│  s3  │──────→  │  ┌───────────┐  │
└──────┘         │  │  "Hello"  │  │ (별도 객체)
                 │  └───────────┘  │
                 └─────────────────┘
```

### String 불변성 (Immutable)

```java
String str = "Hello";
str = str + " World";  // 새 객체 생성됨

// 기존 "Hello"는 그대로, 새로운 "Hello World" 생성
```

### 주요 메서드

```java
String str = "Hello World";

str.length();           // 11 (길이)
str.charAt(0);          // 'H' (특정 위치 문자)
str.substring(0, 5);    // "Hello" (부분 문자열)
str.toUpperCase();      // "HELLO WORLD"
str.toLowerCase();      // "hello world"
str.trim();             // 앞뒤 공백 제거
str.replace("o", "0");  // "Hell0 W0rld"
str.split(" ");         // ["Hello", "World"]
str.contains("World");  // true
str.startsWith("He");   // true
str.endsWith("ld");     // true
str.indexOf("o");       // 4 (첫 번째 위치)
str.isEmpty();          // false
str.isBlank();          // false (Java 11+)
```

---

## Wrapper 클래스

### 기본 타입의 객체 버전

|기본 타입|Wrapper 클래스|
|---|---|
|byte|Byte|
|short|Short|
|int|**Integer**|
|long|Long|
|float|Float|
|double|Double|
|char|**Character**|
|boolean|Boolean|

### 박싱과 언박싱

```java
// 박싱 (Boxing): 기본 타입 → Wrapper
int num = 10;
Integer obj = num;  // 오토박싱 (자동)
Integer obj2 = Integer.valueOf(num);  // 명시적

// 언박싱 (Unboxing): Wrapper → 기본 타입
Integer obj3 = 20;
int num2 = obj3;  // 오토언박싱 (자동)
int num3 = obj3.intValue();  // 명시적
```

### Wrapper 클래스 활용

```java
// 문자열 → 숫자 변환
int n1 = Integer.parseInt("100");
double n2 = Double.parseDouble("3.14");

// 숫자 → 문자열 변환
String s1 = Integer.toString(100);
String s2 = String.valueOf(100);

// 최대/최소값
int max = Integer.MAX_VALUE;  // 2,147,483,647
int min = Integer.MIN_VALUE;  // -2,147,483,648

// 진법 변환
String binary = Integer.toBinaryString(10);  // "1010"
String hex = Integer.toHexString(255);       // "ff"
```

---

## 배열 참조

```java
int[] arr1 = {1, 2, 3};
int[] arr2 = arr1;  // 같은 배열 참조

arr2[0] = 100;
System.out.println(arr1[0]);  // 100 (arr1도 변경됨!)

// 복사하려면
int[] arr3 = arr1.clone();
int[] arr4 = Arrays.copyOf(arr1, arr1.length);
```

---

> [!tip] 핵심 정리
> 
> - 참조 타입은 **주소**를 저장, 실제 데이터는 Heap
> - `==`는 주소 비교, `equals()`는 값 비교
> - `null`은 아무것도 참조하지 않음 → NPE 주의
> - String은 불변(Immutable), Pool 활용
> - Wrapper 클래스로 기본 타입을 객체로 사용

---

#Java #참조타입 #Reference #String #기초문법