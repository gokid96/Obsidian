
## 개요

- 두 값을 비교하여 **boolean(true/false)** 반환
- 조건문, 반복문에서 주로 사용

---

## 비교 연산자 종류

|연산자|의미|예시|결과|
|---|---|---|---|
|`==`|같다|`5 == 5`|true|
|`!=`|같지 않다|`5 != 3`|true|
|`>`|크다|`5 > 3`|true|
|`<`|작다|`5 < 3`|false|
|`>=`|크거나 같다|`5 >= 5`|true|
|`<=`|작거나 같다|`5 <= 3`|false|

```java
int a = 10, b = 5;

System.out.println(a == b);  // false
System.out.println(a != b);  // true
System.out.println(a > b);   // true
System.out.println(a < b);   // false
System.out.println(a >= b);  // true
System.out.println(a <= b);  // false
```

---

## 기본 타입 비교

### 정수 비교

```java
int a = 10;
int b = 10;
System.out.println(a == b);  // true (값 비교)
```

### 실수 비교 주의

```java
double d1 = 0.1 + 0.2;
double d2 = 0.3;
System.out.println(d1 == d2);  // false! (부동소수점 오차)

// 해결: 오차 범위 비교
double epsilon = 0.0001;
System.out.println(Math.abs(d1 - d2) < epsilon);  // true
```

### char 비교

```java
char c1 = 'A';  // 65
char c2 = 'B';  // 66

System.out.println(c1 < c2);   // true (유니코드 값 비교)
System.out.println(c1 == 65);  // true
```

---

## 참조 타입 비교

### == vs equals()

```java
// == : 주소(참조) 비교
// equals() : 값(내용) 비교

String s1 = new String("Hello");
String s2 = new String("Hello");
String s3 = "Hello";
String s4 = "Hello";

// new로 생성: 다른 객체
System.out.println(s1 == s2);       // false (주소 다름)
System.out.println(s1.equals(s2));  // true (값 같음)

// 리터럴: String Pool에서 같은 객체
System.out.println(s3 == s4);       // true (같은 주소)
System.out.println(s3.equals(s4));  // true (값 같음)
```

### 메모리 구조

```
[Stack]          [Heap]
┌──────┐         ┌───────────────────┐
│  s1  │────────→│ "Hello" (@100)    │
├──────┤         ├───────────────────┤
│  s2  │────────→│ "Hello" (@200)    │ (다른 객체)
├──────┤         ├───────────────────┤
│  s3  │────┬───→│ String Pool       │
├──────┤    │    │  "Hello" (@300)   │
│  s4  │────┘    └───────────────────┘
└──────┘
```

### 객체 비교

```java
class Person {
    String name;
    int age;
    
    Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
}

Person p1 = new Person("홍길동", 25);
Person p2 = new Person("홍길동", 25);

System.out.println(p1 == p2);       // false (다른 객체)
System.out.println(p1.equals(p2));  // false (equals 재정의 안 함)
```

### equals() 재정의

```java
class Person {
    String name;
    int age;
    
    // equals 재정의
    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null || getClass() != obj.getClass()) return false;
        Person person = (Person) obj;
        return age == person.age && Objects.equals(name, person.name);
    }
}

Person p1 = new Person("홍길동", 25);
Person p2 = new Person("홍길동", 25);
System.out.println(p1.equals(p2));  // true
```

---

## null 비교

```java
String str = null;

// == 로 null 체크
if (str == null) {
    System.out.println("null입니다");
}

// equals() 사용 시 주의
// str.equals("Hello");  // NullPointerException!

// 안전한 방법 1: null 먼저 체크
if (str != null && str.equals("Hello")) { }

// 안전한 방법 2: 리터럴을 앞에
if ("Hello".equals(str)) { }  // str이 null이어도 안전

// 안전한 방법 3: Objects.equals() (Java 7+)
if (Objects.equals(str, "Hello")) { }  // null-safe
```

---

## 배열 비교

```java
int[] arr1 = {1, 2, 3};
int[] arr2 = {1, 2, 3};
int[] arr3 = arr1;

// == : 참조 비교
System.out.println(arr1 == arr2);  // false
System.out.println(arr1 == arr3);  // true

// Arrays.equals() : 내용 비교
System.out.println(Arrays.equals(arr1, arr2));  // true

// 다차원 배열
int[][] arr2d1 = {{1, 2}, {3, 4}};
int[][] arr2d2 = {{1, 2}, {3, 4}};
System.out.println(Arrays.equals(arr2d1, arr2d2));      // false!
System.out.println(Arrays.deepEquals(arr2d1, arr2d2));  // true
```

---

## instanceof 연산자

- 객체가 특정 타입인지 확인
- 상속 관계에서 사용

```java
String str = "Hello";
System.out.println(str instanceof String);  // true
System.out.println(str instanceof Object);  // true

// null 체크
String nullStr = null;
System.out.println(nullStr instanceof String);  // false (에러 아님)
```

### 상속에서 활용

```java
class Animal { }
class Dog extends Animal { }
class Cat extends Animal { }

Animal animal = new Dog();

if (animal instanceof Dog) {
    Dog dog = (Dog) animal;  // 안전한 캐스팅
    System.out.println("강아지입니다");
}
```

### 패턴 매칭 (Java 16+)

```java
// 기존 방식
if (obj instanceof String) {
    String str = (String) obj;
    System.out.println(str.length());
}

// Java 16+ 패턴 매칭
if (obj instanceof String str) {
    System.out.println(str.length());  // 바로 사용 가능
}
```

---

## 비교 연산 활용

### 범위 체크

```java
int score = 85;

// 잘못된 방법
// if (60 <= score <= 100)  // 컴파일 에러!

// 올바른 방법
if (score >= 60 && score <= 100) {
    System.out.println("합격");
}
```

### 문자열 크기 비교

```java
String s1 = "apple";
String s2 = "banana";

// compareTo(): 사전순 비교
int result = s1.compareTo(s2);
// 음수: s1 < s2
// 0: s1 == s2
// 양수: s1 > s2

System.out.println(result);  // 음수 (apple < banana)

// 대소문자 무시
"Apple".compareToIgnoreCase("apple");  // 0
```

---

> [!tip] 핵심 정리
> 
> - 기본 타입: `==`로 값 비교
> - 참조 타입: `==`는 주소, `equals()`는 값 비교
> - 실수 비교: 오차 범위 사용
> - null 비교: `==` 사용 또는 `Objects.equals()`
> - 배열 비교: `Arrays.equals()` 사용

---

> [!warning] 주의
> 
> - `=`(대입)과 `==`(비교) 혼동 주의
> - String 비교는 반드시 `equals()` 사용
> - null.equals()는 NPE 발생!

---

#Java #연산자 #비교연산자 #기초문법