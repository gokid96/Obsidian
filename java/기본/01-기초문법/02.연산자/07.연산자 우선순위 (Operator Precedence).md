## 개요

- 여러 연산자가 있을 때 **어떤 것을 먼저 계산**할지 결정
- 우선순위가 같으면 **결합 방향**에 따라 결정
- 명확하지 않으면 **괄호 사용** 권장

---

## 우선순위 표

|순위|연산자|설명|결합 방향|
|---|---|---|---|
|1|`()` `[]` `.`|괄호, 배열, 멤버접근|→|
|2|`++` `--` `+` `-` `~` `!`|단항 연산자|←|
|3|`*` `/` `%`|곱셈, 나눗셈, 나머지|→|
|4|`+` `-`|덧셈, 뺄셈|→|
|5|`<<` `>>` `>>>`|시프트|→|
|6|`<` `<=` `>` `>=` `instanceof`|비교|→|
|7|`==` `!=`|동등 비교|→|
|8|`&`|비트 AND|→|
|9|`^`|비트 XOR|→|
|10|`|`|비트 OR|
|11|`&&`|논리 AND|→|
|12|`||`|
|13|`? :`|삼항 연산자|←|
|14|`=` `+=` `-=` 등|대입 연산자|←|

> **숫자가 작을수록 우선순위 높음**

---

## 우선순위 예시

### 산술 연산자

```java
int result = 2 + 3 * 4;  // 2 + 12 = 14
// 곱셈(*) > 덧셈(+)

int result2 = (2 + 3) * 4;  // 5 * 4 = 20
// 괄호가 가장 우선

int result3 = 10 - 4 / 2;  // 10 - 2 = 8
// 나눗셈(/) > 뺄셈(-)

int result4 = 10 % 3 + 2;  // 1 + 2 = 3
// 나머지(%) > 덧셈(+)
```

### 비교와 논리 연산자

```java
boolean b1 = 5 > 3 && 2 < 4;  // true && true = true
// 비교(> <) > 논리(&&)

boolean b2 = 5 > 3 || 2 > 4 && 1 < 2;
// 5 > 3 → true
// 2 > 4 → false
// 1 < 2 → true
// false && true → false (AND 먼저)
// true || false → true
```

### 복합 예시

```java
int x = 5;
boolean result = x++ > 5 && x < 10;
// 1. x++ → x는 6이 되지만, 비교는 5로 (후위)
// 2. 5 > 5 → false
// 3. false && ... → 단락 평가로 뒤는 실행 안 됨
// result = false
```

---

## 결합 방향

### 왼쪽 → 오른쪽 (대부분)

```java
int a = 10 - 5 - 2;  // (10 - 5) - 2 = 3
int b = 100 / 10 / 2;  // (100 / 10) / 2 = 5

boolean c = true || false || true;  // ((true || false) || true)
```

### 오른쪽 → 왼쪽 (대입, 단항, 삼항)

```java
// 대입 연산자
int a, b, c;
a = b = c = 10;  // a = (b = (c = 10))

// 단항 연산자
int x = 5;
int y = - - x;  // -(-x) = -(-5) = 5

// 삼항 연산자
int result = a > b ? a : b > c ? b : c;
// a > b ? a : (b > c ? b : c)
```

---

## 주의해야 할 경우

### 1. 증감 연산자와 다른 연산

```java
int a = 5;
int b = ++a + a++;
// 1. ++a → a=6, 값은 6
// 2. 6 + a++ → a=7, 값은 6
// b = 6 + 6 = 12

// 이런 코드는 피하세요!
```

### 2. 비트 연산자와 비교 연산자

```java
// 잘못된 예
// if (flags & READ == READ)  // 에러! == 이 & 보다 우선

// 올바른 예
if ((flags & READ) == READ) { }
```

### 3. 삼항 연산자 중첩

```java
// 혼란스러운 예
int result = a > b ? a : b > c ? b : c;

// 명확하게
int result = a > b ? a : (b > c ? b : c);

// 더 명확하게 (if-else 사용)
int result;
if (a > b) {
    result = a;
} else if (b > c) {
    result = b;
} else {
    result = c;
}
```

### 4. 문자열 연결과 덧셈

```java
System.out.println("결과: " + 1 + 2);   // "결과: 12"
System.out.println("결과: " + (1 + 2)); // "결과: 3"
System.out.println(1 + 2 + "결과");     // "3결과"
```

---

## 괄호 사용 권장

### 명확하지 않으면 괄호를 사용하세요

```java
// 애매한 코드
int result = a + b * c - d / e;

// 명확한 코드
int result = a + (b * c) - (d / e);

// 복잡한 조건
if (a > b && c < d || e == f) { }  // 의도가 불분명

// 명확하게
if ((a > b && c < d) || e == f) { }  // OR 조건
if (a > b && (c < d || e == f)) { }  // AND 조건
```

### 괄호로 가독성 향상

```java
// 비트 연산
int masked = (value & 0xFF);
int shifted = (value >> 8);

// 삼항 연산자
String status = (isActive) ? "ON" : "OFF";

// 복합 조건
boolean valid = (name != null) && (!name.isEmpty());
```

---

## 실전 예제

### 점수 계산

```java
int korean = 80, english = 90, math = 85;

// 우선순위에 의해 올바르게 계산
double avg = (korean + english + math) / 3.0;
// 괄호로 덧셈 먼저, 3.0으로 실수 나눗셈

// 잘못된 계산
double wrong = korean + english + math / 3.0;
// math / 3.0 먼저 계산됨!
```

### 범위 체크

```java
int value = 50;

// 올바른 범위 체크
if (value >= 0 && value <= 100) { }

// 괄호는 선택사항이지만 명확함
if ((value >= 0) && (value <= 100)) { }
```

### 비트 플래그

```java
int flags = 0b0111;
int READ = 0b0001;
int WRITE = 0b0010;

// 괄호 필수!
boolean canRead = (flags & READ) != 0;
boolean canReadWrite = ((flags & READ) != 0) && ((flags & WRITE) != 0);
```

### 조건부 문자열

```java
int count = 5;
String msg = "총 " + count + "개" + ((count > 1) ? " 있음" : "");
// 삼항 연산자에 괄호
```

---

## 암기 팁

### 우선순위 그룹

```
1. 단항 (++ -- ! ~)
2. 산술 (* / % → + -)
3. 시프트 (<< >> >>>)
4. 비교 (< <= > >= == !=)
5. 비트 (& ^ |)
6. 논리 (&& ||)
7. 삼항 (? :)
8. 대입 (= += -=)
```

### 핵심 규칙

1. **곱셈/나눗셈** > 덧셈/뺄셈
2. **비교** > 논리
3. **AND(&&)** > OR(||)
4. **비트 AND(&)** > 비트 XOR(^) > 비트 OR(|)
5. **모든 것** > 대입

---

> [!tip] 핵심 정리
> 
> - 산술 > 비교 > 논리 > 대입
> - `*` `/` `%` > `+` `-`
> - `&&` > `||`
> - 애매하면 **괄호 사용**
> - 복잡한 표현식은 **분리**

---

> [!warning] 주의
> 
> - 증감 연산자와 다른 연산 혼용 피하기
> - 비트 연산자는 반드시 괄호 사용
> - 문자열 `+` 연산 순서 주의

---

#Java #연산자 #우선순위 #기초문법