## 개요

- **조건에 따라 값을 선택**하는 연산자
- if-else를 간단히 표현
- Java에서 유일한 3개의 피연산자를 가지는 연산자

---

## 기본 문법

```java
조건식 ? 참일때값 : 거짓일때값
```

```java
int a = 10, b = 5;
int max = (a > b) ? a : b;  // a가 크면 a, 아니면 b

System.out.println(max);  // 10
```

---

## if-else와 비교

### if-else 방식

```java
int score = 85;
String result;

if (score >= 60) {
    result = "합격";
} else {
    result = "불합격";
}
```

### 삼항 연산자 방식

```java
int score = 85;
String result = (score >= 60) ? "합격" : "불합격";
```

---

## 활용 예시

### 최대값/최소값

```java
int a = 10, b = 20;

int max = (a > b) ? a : b;  // 20
int min = (a < b) ? a : b;  // 10
```

### 절대값

```java
int num = -5;
int abs = (num >= 0) ? num : -num;  // 5
```

### 짝수/홀수

```java
int num = 7;
String type = (num % 2 == 0) ? "짝수" : "홀수";  // "홀수"
```

### null 체크

```java
String name = null;
String displayName = (name != null) ? name : "Guest";  // "Guest"

// Java 9+ Objects.requireNonNullElse
String displayName2 = Objects.requireNonNullElse(name, "Guest");
```

### 부호 판별

```java
int num = -3;
String sign = (num > 0) ? "양수" : (num < 0) ? "음수" : "영";
// "음수"
```

---

## 중첩 삼항 연산자

### 기본 형태

```java
// 조건1 ? 값1 : 조건2 ? 값2 : 값3
int score = 75;

String grade = (score >= 90) ? "A" :
               (score >= 80) ? "B" :
               (score >= 70) ? "C" :
               (score >= 60) ? "D" : "F";

System.out.println(grade);  // C
```

### 가독성을 위한 포맷팅

```java
// 한 줄 (짧을 때)
int result = (a > 0) ? 1 : (a < 0) ? -1 : 0;

// 여러 줄 (길 때)
String message = (status == 1) ? "진행중" :
                 (status == 2) ? "완료" :
                 (status == 3) ? "취소" : "알 수 없음";
```

> [!warning] 중첩은 2단계까지만 3단계 이상 중첩 시 if-else나 switch가 더 가독성이 좋습니다.

---

## 반환값으로 활용

### 메서드 반환

```java
public String getStatus(boolean isActive) {
    return isActive ? "활성" : "비활성";
}
```

### 출력문에서 직접 사용

```java
int count = 3;
System.out.println("아이템 " + count + "개" + (count > 1 ? "s" : ""));
// 아이템 3개s (영어에서 복수형 처리)

System.out.println(count + " item" + (count > 1 ? "s" : ""));
// 3 items
```

---

## 타입 일치

### 두 값의 타입은 호환되어야 함

```java
int a = 10;

// OK: 같은 타입
int result1 = (a > 0) ? 1 : 0;

// OK: 자동 형변환 가능
double result2 = (a > 0) ? 1 : 0.5;  // int → double

// OK: 상위 타입으로 통일
Number result3 = (a > 0) ? Integer.valueOf(1) : Double.valueOf(0.5);
```

### String과 다른 타입

```java
// 문자열 연결에서는 자동 변환
String msg = "결과: " + ((a > 0) ? a : "없음");  // OK

// 직접 대입 시 타입 주의
// Object result = (a > 0) ? a : "없음";  // OK (Object로)
```

---

## 주의사항

### 1. 실행문은 사용 불가

```java
// 삼항 연산자는 '값'을 반환해야 함
// (a > b) ? System.out.println(a) : System.out.println(b);  // 에러!

// 올바른 방법
System.out.println((a > b) ? a : b);
```

### 2. 할당 없이 단독 사용 불가

```java
// (a > b) ? a++ : b++;  // 컴파일은 되지만 권장하지 않음

// if문 사용 권장
if (a > b) {
    a++;
} else {
    b++;
}
```

### 3. 복잡한 로직은 피하기

```java
// 나쁜 예: 너무 복잡
String result = (a > 0) ? ((b > 0) ? ((c > 0) ? "A" : "B") : "C") : "D";

// 좋은 예: if-else 사용
String result;
if (a > 0) {
    if (b > 0) {
        result = (c > 0) ? "A" : "B";
    } else {
        result = "C";
    }
} else {
    result = "D";
}
```

---

## 삼항 연산자 vs if-else

### 삼항 연산자가 좋은 경우

```java
// 단순 값 선택
int max = (a > b) ? a : b;

// 초기화
String status = (isActive) ? "ON" : "OFF";

// 반환값
return (valid) ? data : defaultData;
```

### if-else가 좋은 경우

```java
// 복잡한 로직
if (condition) {
    // 여러 줄의 코드
    doSomething();
    doAnotherThing();
} else {
    // 다른 로직
}

// 중첩이 많은 경우
// 실행문이 필요한 경우
```

---

## 실전 예제

### 배열 요소 출력 (구분자)

```java
int[] arr = {1, 2, 3, 4, 5};

StringBuilder sb = new StringBuilder();
for (int i = 0; i < arr.length; i++) {
    sb.append(arr[i]);
    sb.append((i < arr.length - 1) ? ", " : "");
}
System.out.println(sb);  // 1, 2, 3, 4, 5
```

### 시간 포맷팅

```java
int hour = 5;
int minute = 3;

// 한 자리수면 앞에 0 붙이기
String time = (hour < 10 ? "0" : "") + hour + ":" +
              (minute < 10 ? "0" : "") + minute;
System.out.println(time);  // 05:03
```

### 페이지네이션

```java
int currentPage = 3;
int totalPages = 10;

String prevLink = (currentPage > 1) ? "< 이전" : "";
String nextLink = (currentPage < totalPages) ? "다음 >" : "";
```

### 등급 계산

```java
int point = 2500;

String tier = (point >= 3000) ? "Gold" :
              (point >= 2000) ? "Silver" :
              (point >= 1000) ? "Bronze" : "Basic";
System.out.println(tier);  // Silver
```

---

> [!tip] 핵심 정리
> 
> - 문법: `조건 ? 참값 : 거짓값`
> - 단순한 값 선택에 적합
> - 중첩은 2단계까지만
> - 복잡한 로직은 if-else 사용
> - 실행문이 아닌 **값**을 반환해야 함

---

#Java #연산자 #삼항연산자 #기초문법