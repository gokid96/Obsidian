# String 클래스

## String 특징
- **불변(Immutable)** 객체
- 한 번 생성되면 **내용 변경 불가**
- 문자열 조작 시 **새 객체 생성**

---

## String 생성

### 리터럴 방식 (권장)
```java
String str1 = "Hello";
String str2 = "Hello";

// 같은 객체 참조 (String Pool)
System.out.println(str1 == str2);  // true
```

### new 방식
```java
String str3 = new String("Hello");
String str4 = new String("Hello");

// 다른 객체
System.out.println(str3 == str4);  // false
System.out.println(str3.equals(str4));  // true
```

### String Pool
```
[Heap]
┌─────────────────────────────────┐
│  String Pool                    │
│  ┌─────────┐                    │
│  │ "Hello" │ ← str1, str2       │
│  └─────────┘                    │
├─────────────────────────────────┤
│  ┌─────────┐                    │
│  │ "Hello" │ ← str3             │
│  └─────────┘                    │
│  ┌─────────┐                    │
│  │ "Hello" │ ← str4             │
│  └─────────┘                    │
└─────────────────────────────────┘
```

---

## 문자열 비교

### == vs equals()
```java
String s1 = "Hello";
String s2 = "Hello";
String s3 = new String("Hello");

// == : 주소 비교
System.out.println(s1 == s2);   // true (같은 Pool 객체)
System.out.println(s1 == s3);   // false (다른 객체)

// equals() : 내용 비교
System.out.println(s1.equals(s2));  // true
System.out.println(s1.equals(s3));  // true
```

### 대소문자 무시 비교
```java
String a = "Hello";
String b = "HELLO";

System.out.println(a.equals(b));            // false
System.out.println(a.equalsIgnoreCase(b));  // true
```

### 사전순 비교
```java
String a = "apple";
String b = "banana";

int result = a.compareTo(b);
// 음수: a < b
// 0: a == b
// 양수: a > b

System.out.println(result);  // 음수 (apple < banana)
```

---

## 주요 메서드

### 길이와 빈 문자열
```java
String str = "Hello";

str.length();       // 5
str.isEmpty();      // false
str.isBlank();      // false (Java 11+, 공백만 있어도 true)

"".isEmpty();       // true
"   ".isEmpty();    // false
"   ".isBlank();    // true
```

### 문자 추출
```java
String str = "Hello";

str.charAt(0);      // 'H'
str.charAt(4);      // 'o'

// 문자 배열로
char[] chars = str.toCharArray();  // ['H','e','l','l','o']
```

### 부분 문자열
```java
String str = "Hello World";

str.substring(0, 5);   // "Hello" (0~4)
str.substring(6);      // "World" (6~끝)
```

### 검색
```java
String str = "Hello World";

str.indexOf("o");       // 4 (처음 발견 위치)
str.lastIndexOf("o");   // 7 (마지막 발견 위치)
str.indexOf("x");       // -1 (없으면)

str.contains("World");  // true
str.startsWith("He");   // true
str.endsWith("ld");     // true
```

### 변환
```java
String str = "Hello World";

str.toUpperCase();   // "HELLO WORLD"
str.toLowerCase();   // "hello world"

"  Hello  ".trim();       // "Hello" (앞뒤 공백 제거)
"  Hello  ".strip();      // "Hello" (Java 11+, 유니코드 공백도)
"  Hello  ".stripLeading();  // "Hello  "
"  Hello  ".stripTrailing(); // "  Hello"
```

### 치환
```java
String str = "Hello World";

str.replace("World", "Java");     // "Hello Java"
str.replace('l', 'L');            // "HeLLo WorLd"
str.replaceAll("[aeiou]", "*");   // "H*ll* W*rld" (정규식)
str.replaceFirst("l", "L");       // "HeLlo World"
```

### 분할과 결합
```java
// 분할
String str = "a,b,c,d";
String[] parts = str.split(",");  // ["a", "b", "c", "d"]

"a::b::c".split("::");  // ["a", "b", "c"]

// 결합
String.join("-", "a", "b", "c");  // "a-b-c"
String.join(", ", parts);         // "a, b, c, d"
```

### 포맷팅
```java
String name = "홍길동";
int age = 25;

// format()
String msg = String.format("%s님, %d세입니다.", name, age);
// "홍길동님, 25세입니다."

// formatted() - Java 15+
String msg2 = "%s님, %d세입니다.".formatted(name, age);
```

### 포맷 지정자
| 지정자 | 의미 | 예시 |
|--------|------|------|
| %s | 문자열 | "Hello" |
| %d | 정수 | 123 |
| %f | 실수 | 3.14 |
| %.2f | 소수점 2자리 | 3.14 |
| %n | 줄바꿈 | |
| %% | % 문자 | % |

---

## 문자열 불변성

### 내용 변경 시 새 객체 생성
```java
String str = "Hello";
str = str + " World";  // 새 객체 생성

// 메모리
// "Hello" (기존 객체, 나중에 GC)
// "Hello World" (새 객체, str이 참조)
```

### 반복 연결의 비효율
```java
// 비효율적 (매번 새 객체)
String result = "";
for (int i = 0; i < 1000; i++) {
    result += i;  // 느림!
}

// StringBuilder 사용 권장
StringBuilder sb = new StringBuilder();
for (int i = 0; i < 1000; i++) {
    sb.append(i);
}
String result = sb.toString();
```

---

## 타입 변환

### 기본 타입 → String
```java
String s1 = String.valueOf(123);      // "123"
String s2 = String.valueOf(3.14);     // "3.14"
String s3 = String.valueOf(true);     // "true"
String s4 = String.valueOf('A');      // "A"

// 또는
String s5 = "" + 123;                 // "123"
String s6 = Integer.toString(123);    // "123"
```

### String → 기본 타입
```java
int i = Integer.parseInt("123");
double d = Double.parseDouble("3.14");
boolean b = Boolean.parseBoolean("true");

// Wrapper 클래스
Integer num = Integer.valueOf("123");
```

---

## 실전 예제

### 이메일 유효성 검사
```java
public boolean isValidEmail(String email) {
    if (email == null || email.isBlank()) {
        return false;
    }
    return email.contains("@") && email.contains(".");
}
```

### 문자열 뒤집기
```java
public String reverse(String str) {
    return new StringBuilder(str).reverse().toString();
}
```

### 단어 개수 세기
```java
public int countWords(String text) {
    if (text == null || text.isBlank()) {
        return 0;
    }
    return text.trim().split("\\s+").length;
}
```

### 특정 문자 개수
```java
public int countChar(String str, char c) {
    int count = 0;
    for (char ch : str.toCharArray()) {
        if (ch == c) count++;
    }
    return count;
}

// 또는 Java 8+
long count = str.chars().filter(ch -> ch == c).count();
```

---

> [!tip] 핵심 정리
> - String은 **불변(Immutable)**
> - 비교: `equals()` 사용 (== 는 주소 비교)
> - 반복 연결: **StringBuilder** 사용
> - 리터럴은 **String Pool**에서 공유
> - 주요 메서드: `substring`, `split`, `replace`, `contains`

---

#Java #String #문자열 #자바핵심
