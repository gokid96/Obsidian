# 열거형 (Enum)

## 열거형이란?
- **관련된 상수들의 집합**
- 타입 안전한 상수 정의
- 싱글톤 보장

---

## enum 정의

### 기본 형태
```java
public enum Day {
    MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY
}

public enum Season {
    SPRING, SUMMER, FALL, WINTER
}
```

### 사용
```java
Day today = Day.MONDAY;

if (today == Day.MONDAY) {
    System.out.println("월요병...");
}

// switch 문
switch (today) {
    case MONDAY:
        System.out.println("월요일");
        break;
    case FRIDAY:
        System.out.println("불금!");
        break;
}

// Java 14+ switch 표현식
String msg = switch (today) {
    case MONDAY -> "월요일";
    case FRIDAY -> "불금!";
    default -> "평일";
};
```

---

## enum vs 상수

### 상수의 문제점
```java
// 정수 상수
public class Day {
    public static final int MONDAY = 0;
    public static final int TUESDAY = 1;
    // ...
}

int day = Day.MONDAY;
day = 100;  // 잘못된 값도 허용됨!
day = -1;   // 타입 체크 불가
```

### enum의 장점
```java
public enum Day {
    MONDAY, TUESDAY, WEDNESDAY
}

Day day = Day.MONDAY;
// day = 100;  // 컴파일 에러!
// day = -1;   // 불가능
```

---

## enum 주요 메서드

### 기본 메서드
```java
Day today = Day.MONDAY;

// name() - 상수 이름
String name = today.name();  // "MONDAY"

// ordinal() - 순서 (0부터)
int order = today.ordinal();  // 0

// toString() - 기본적으로 name()과 동일
String str = today.toString();  // "MONDAY"

// compareTo() - 순서 비교
Day.MONDAY.compareTo(Day.FRIDAY);  // 음수 (MONDAY < FRIDAY)
```

### 정적 메서드
```java
// values() - 모든 상수 배열
Day[] days = Day.values();
for (Day day : days) {
    System.out.println(day);
}

// valueOf() - 이름으로 상수 찾기
Day monday = Day.valueOf("MONDAY");

// valueOf() 없는 값 - 예외 발생
// Day.valueOf("HOLIDAY");  // IllegalArgumentException
```

---

## enum에 필드와 메서드

### 필드 추가
```java
public enum Day {
    MONDAY("월요일", true),
    TUESDAY("화요일", true),
    WEDNESDAY("수요일", true),
    THURSDAY("목요일", true),
    FRIDAY("금요일", true),
    SATURDAY("토요일", false),
    SUNDAY("일요일", false);
    
    private final String korean;
    private final boolean workday;
    
    // 생성자 (private만 가능)
    Day(String korean, boolean workday) {
        this.korean = korean;
        this.workday = workday;
    }
    
    public String getKorean() {
        return korean;
    }
    
    public boolean isWorkday() {
        return workday;
    }
}

// 사용
Day today = Day.MONDAY;
System.out.println(today.getKorean());  // "월요일"
System.out.println(today.isWorkday());  // true
```

### 메서드 추가
```java
public enum Operation {
    PLUS("+") {
        @Override
        public int apply(int a, int b) {
            return a + b;
        }
    },
    MINUS("-") {
        @Override
        public int apply(int a, int b) {
            return a - b;
        }
    },
    MULTIPLY("*") {
        @Override
        public int apply(int a, int b) {
            return a * b;
        }
    },
    DIVIDE("/") {
        @Override
        public int apply(int a, int b) {
            return a / b;
        }
    };
    
    private final String symbol;
    
    Operation(String symbol) {
        this.symbol = symbol;
    }
    
    public String getSymbol() {
        return symbol;
    }
    
    public abstract int apply(int a, int b);
}

// 사용
int result = Operation.PLUS.apply(10, 5);  // 15
System.out.println(Operation.PLUS.getSymbol());  // "+"
```

---

## enum과 인터페이스

```java
public interface Describable {
    String getDescription();
}

public enum Status implements Describable {
    PENDING("대기 중"),
    PROCESSING("처리 중"),
    COMPLETED("완료"),
    FAILED("실패");
    
    private final String description;
    
    Status(String description) {
        this.description = description;
    }
    
    @Override
    public String getDescription() {
        return description;
    }
}
```

---

## EnumSet

### enum 전용 Set
```java
EnumSet<Day> workdays = EnumSet.of(
    Day.MONDAY, Day.TUESDAY, Day.WEDNESDAY, Day.THURSDAY, Day.FRIDAY
);

EnumSet<Day> weekend = EnumSet.of(Day.SATURDAY, Day.SUNDAY);

// 모든 값
EnumSet<Day> allDays = EnumSet.allOf(Day.class);

// 빈 Set
EnumSet<Day> noDays = EnumSet.noneOf(Day.class);

// 범위
EnumSet<Day> monToWed = EnumSet.range(Day.MONDAY, Day.WEDNESDAY);

// 여집합
EnumSet<Day> notWeekend = EnumSet.complementOf(weekend);
```

---

## EnumMap

### enum 전용 Map
```java
EnumMap<Day, String> schedule = new EnumMap<>(Day.class);

schedule.put(Day.MONDAY, "회의");
schedule.put(Day.TUESDAY, "개발");
schedule.put(Day.FRIDAY, "배포");

String mondayTask = schedule.get(Day.MONDAY);  // "회의"

// 순회 (선언 순서대로)
for (Map.Entry<Day, String> entry : schedule.entrySet()) {
    System.out.println(entry.getKey() + ": " + entry.getValue());
}
```

---

## 실전 예제

### HTTP 상태 코드
```java
public enum HttpStatus {
    OK(200, "OK"),
    CREATED(201, "Created"),
    BAD_REQUEST(400, "Bad Request"),
    UNAUTHORIZED(401, "Unauthorized"),
    FORBIDDEN(403, "Forbidden"),
    NOT_FOUND(404, "Not Found"),
    INTERNAL_SERVER_ERROR(500, "Internal Server Error");
    
    private final int code;
    private final String message;
    
    HttpStatus(int code, String message) {
        this.code = code;
        this.message = message;
    }
    
    public int getCode() {
        return code;
    }
    
    public String getMessage() {
        return message;
    }
    
    public static HttpStatus fromCode(int code) {
        for (HttpStatus status : values()) {
            if (status.code == code) {
                return status;
            }
        }
        throw new IllegalArgumentException("Unknown code: " + code);
    }
}

// 사용
HttpStatus status = HttpStatus.NOT_FOUND;
System.out.println(status.getCode());     // 404
System.out.println(status.getMessage());  // "Not Found"

HttpStatus found = HttpStatus.fromCode(200);  // OK
```

### 싱글톤 패턴
```java
public enum Singleton {
    INSTANCE;
    
    private int value;
    
    public int getValue() {
        return value;
    }
    
    public void setValue(int value) {
        this.value = value;
    }
}

// 사용
Singleton.INSTANCE.setValue(100);
int value = Singleton.INSTANCE.getValue();
```

### 상태 머신
```java
public enum OrderStatus {
    CREATED {
        @Override
        public OrderStatus next() {
            return PAID;
        }
    },
    PAID {
        @Override
        public OrderStatus next() {
            return SHIPPED;
        }
    },
    SHIPPED {
        @Override
        public OrderStatus next() {
            return DELIVERED;
        }
    },
    DELIVERED {
        @Override
        public OrderStatus next() {
            return this;  // 최종 상태
        }
    };
    
    public abstract OrderStatus next();
}

// 사용
OrderStatus status = OrderStatus.CREATED;
status = status.next();  // PAID
status = status.next();  // SHIPPED
```

---

> [!tip] 핵심 정리
> - **enum**: 타입 안전한 상수 집합
> - `values()`: 모든 상수 배열
> - `valueOf(String)`: 이름으로 상수 찾기
> - 필드, 메서드, 생성자 추가 가능
> - **EnumSet**, **EnumMap**: enum 전용 컬렉션
> - 싱글톤 패턴 구현에 활용

---

#Java #열거형 #Enum #상수 #자바핵심
