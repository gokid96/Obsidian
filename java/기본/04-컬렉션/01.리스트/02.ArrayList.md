# ArrayList

## ArrayList란?
- **가변 크기 배열** 기반 리스트
- 인덱스로 **빠른 조회** (O(1))
- 삽입/삭제는 느림 (O(n))
- **가장 많이 사용**되는 컬렉션

---

## 생성

```java
import java.util.ArrayList;

// 기본 생성 (초기 용량 10)
ArrayList<String> list1 = new ArrayList<>();

// 초기 용량 지정
ArrayList<String> list2 = new ArrayList<>(100);

// 다른 컬렉션으로 초기화
ArrayList<String> list3 = new ArrayList<>(Arrays.asList("A", "B", "C"));

// List 인터페이스로 선언 (권장)
List<String> list4 = new ArrayList<>();
```

---

## 요소 추가

### add()
```java
List<String> list = new ArrayList<>();

list.add("A");           // 끝에 추가
list.add("B");
list.add("C");           // [A, B, C]

list.add(1, "X");        // 인덱스 1에 삽입 → [A, X, B, C]
```

### addAll()
```java
List<String> list1 = new ArrayList<>(Arrays.asList("A", "B"));
List<String> list2 = Arrays.asList("C", "D");

list1.addAll(list2);       // [A, B, C, D]
list1.addAll(1, list2);    // 인덱스 1부터 삽입
```

---

## 요소 조회

### get()
```java
List<String> list = new ArrayList<>(Arrays.asList("A", "B", "C"));

String first = list.get(0);   // "A"
String last = list.get(list.size() - 1);  // "C"

// list.get(10);  // IndexOutOfBoundsException
```

### indexOf() / lastIndexOf()
```java
List<String> list = new ArrayList<>(Arrays.asList("A", "B", "A", "C"));

int idx = list.indexOf("A");      // 0 (처음 발견)
int lastIdx = list.lastIndexOf("A");  // 2 (마지막 발견)
int notFound = list.indexOf("X");  // -1 (없으면)
```

### contains()
```java
boolean hasA = list.contains("A");  // true
boolean hasX = list.contains("X");  // false
```

---

## 요소 수정

### set()
```java
List<String> list = new ArrayList<>(Arrays.asList("A", "B", "C"));

list.set(1, "X");  // [A, X, C]
String old = list.set(0, "Y");  // old = "A", list = [Y, X, C]
```

---

## 요소 삭제

### remove()
```java
List<String> list = new ArrayList<>(Arrays.asList("A", "B", "C", "B"));

list.remove("B");      // 첫 번째 "B" 삭제 → [A, C, B]
list.remove(0);        // 인덱스 0 삭제 → [C, B]
```

### Integer 리스트 주의
```java
List<Integer> nums = new ArrayList<>(Arrays.asList(1, 2, 3));

nums.remove(1);           // 인덱스 1 삭제 → [1, 3]
nums.remove(Integer.valueOf(1));  // 값 1 삭제 → [3]
```

### removeAll() / retainAll()
```java
List<String> list = new ArrayList<>(Arrays.asList("A", "B", "C", "D"));

list.removeAll(Arrays.asList("A", "C"));  // [B, D] - 지정 요소 삭제
list.retainAll(Arrays.asList("B"));       // [B] - 지정 요소만 유지
```

### clear()
```java
list.clear();  // 전체 삭제
```

---

## 크기와 상태

```java
List<String> list = new ArrayList<>(Arrays.asList("A", "B", "C"));

int size = list.size();       // 3
boolean empty = list.isEmpty(); // false

list.clear();
empty = list.isEmpty();       // true
```

---

## 순회

### for-each
```java
List<String> list = Arrays.asList("A", "B", "C");

for (String item : list) {
    System.out.println(item);
}
```

### 인덱스 for문
```java
for (int i = 0; i < list.size(); i++) {
    System.out.println(i + ": " + list.get(i));
}
```

### Iterator
```java
Iterator<String> it = list.iterator();
while (it.hasNext()) {
    String item = it.next();
    if (item.equals("B")) {
        it.remove();  // 순회 중 안전한 삭제
    }
}
```

### forEach (Java 8+)
```java
list.forEach(System.out::println);
```

---

## 변환

### 배열로 변환
```java
List<String> list = Arrays.asList("A", "B", "C");

// Object 배열
Object[] arr1 = list.toArray();

// String 배열
String[] arr2 = list.toArray(new String[0]);

// Java 11+
String[] arr3 = list.toArray(String[]::new);
```

### 배열에서 List로
```java
String[] arr = {"A", "B", "C"};

// 고정 크기 리스트 (수정 불가)
List<String> list1 = Arrays.asList(arr);

// 가변 크기 리스트
List<String> list2 = new ArrayList<>(Arrays.asList(arr));

// Java 9+
List<String> list3 = List.of(arr);  // 불변
```

---

## 정렬

### Collections.sort()
```java
List<String> list = new ArrayList<>(Arrays.asList("C", "A", "B"));

Collections.sort(list);  // [A, B, C] 오름차순
Collections.sort(list, Collections.reverseOrder());  // [C, B, A] 내림차순
```

### list.sort() (Java 8+)
```java
list.sort(null);  // 자연 순서
list.sort(Comparator.reverseOrder());  // 역순
list.sort(Comparator.comparingInt(String::length));  // 길이순
```

---

## 검색

### 이진 검색 (정렬 필수)
```java
List<Integer> list = new ArrayList<>(Arrays.asList(1, 3, 5, 7, 9));

int idx = Collections.binarySearch(list, 5);  // 2
int notFound = Collections.binarySearch(list, 4);  // 음수 (삽입 위치)
```

---

## subList

### 부분 리스트 (뷰)
```java
List<String> list = new ArrayList<>(Arrays.asList("A", "B", "C", "D", "E"));

List<String> sub = list.subList(1, 4);  // [B, C, D] (인덱스 1~3)

// 부분 삭제
list.subList(1, 3).clear();  // list = [A, D, E]
```

---

## 성능

| 연산 | 시간 복잡도 |
|------|------------|
| get(i) | O(1) |
| add(끝) | O(1) 평균 |
| add(i) | O(n) |
| remove(i) | O(n) |
| contains | O(n) |
| indexOf | O(n) |

---

## 실전 예제

### 중복 제거
```java
List<String> list = new ArrayList<>(Arrays.asList("A", "B", "A", "C", "B"));
List<String> unique = new ArrayList<>(new HashSet<>(list));
// 또는 순서 유지
List<String> unique2 = new ArrayList<>(new LinkedHashSet<>(list));
```

### 필터링 (Java 8+)
```java
List<Integer> nums = Arrays.asList(1, 2, 3, 4, 5, 6);
List<Integer> evens = nums.stream()
    .filter(n -> n % 2 == 0)
    .collect(Collectors.toList());  // [2, 4, 6]
```

### 최대/최소
```java
List<Integer> nums = Arrays.asList(3, 1, 4, 1, 5);
int max = Collections.max(nums);  // 5
int min = Collections.min(nums);  // 1
```

---

> [!tip] 핵심 정리
> - **ArrayList**: 가변 배열, 조회 빠름 O(1)
> - 삽입/삭제는 O(n) → 끝에 추가는 빠름
> - `List<타입>` 인터페이스로 선언 권장
> - 순회 중 삭제는 `Iterator.remove()` 사용
> - 정렬: `Collections.sort()` 또는 `list.sort()`

---

#Java #ArrayList #리스트 #컬렉션
