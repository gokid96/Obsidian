## Outbox + CDC 흐름

```
1. 애플리케이션 → Outbox 테이블에 저장 (같은 트랜잭션)
   
2. CDC(Debezium)가 Outbox 테이블 변경 감지
   
3. 자동으로 Kafka에 발행
```

```
┌─────────────┐     ┌─────────────┐     ┌─────────┐
│ Application │ ──▶ │ Outbox 테이블│ ──▶ │Debezium │ ──▶ Kafka
│  (DB 저장)  │      │  (같은 DB)  │     │  (CDC)  │
└─────────────┘     └─────────────┘     └─────────┘
```

---

## 스케줄러 vs CDC 차이

| |Outbox + 스케줄러|Outbox + CDC|
|---|---|---|
|발행 방식|스케줄러가 폴링|CDC가 변경 감지|
|지연|폴링 주기 (1초~)|거의 실시간|
|추가 인프라|없음|Debezium 필요|

---

## 왜 조합하나?

CDC만 쓰면 → 비즈니스 테이블 직접 읽음 → 이벤트 포맷 제어 어려움

Outbox + CDC → 원하는 이벤트 형태로 저장 → CDC가 그대로 발행

스케줄러 폴링 없이 **실시간 + 이벤트 형태 제어** 둘 다 가능