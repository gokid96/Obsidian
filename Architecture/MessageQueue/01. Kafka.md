Kafka는 **분산 이벤트 스트리밍 플랫폼**이다. (LinkedIn 개발)

---

## 핵심 구성요소

**클라이언트**
- Producer: 메시지를 Kafka에 보냄
- Consumer: 메시지를 Kafka에서 읽음
- Consumer Group: 같은 그룹이 Partition 나눠서 처리

**Kafka 내부**
- Broker: Kafka 서버 인스턴스
- Topic: 메시지가 저장되는 논리적 채널
- Partition: Topic을 쪼갠 조각 (병렬 처리)

---

## 구조

```
┌─────────────┐
│order-service│ ← Producer
└──────┬──────┘
       ▼
┌─────────────────────────────┐
│           Kafka             │
│       (order-topic)         │
└───┬─────────┬─────────┬─────┘
    ▼         ▼         ▼
┌───────┐ ┌───────┐ ┌─────────┐
│ stock │ │ noti  │ │analytics│ ← Consumer
└───────┘ └───────┘ └─────────┘
```

---

## 주요 특징

- 높은 처리량 (초당 수백만 건)
- 내구성 (디스크 저장 + 복제)
- 메시지 보존 (소비 후에도 보관)

---

## 코드 예시

**Producer**
```java
kafkaTemplate.send("order-topic", orderEvent);
```

**Consumer**
```java
@KafkaListener(topics = "order-topic")
public void handleOrder(OrderEvent event) {
    // 처리
}
```

---

## Kafka vs 일반 큐

| | 일반 큐 | Kafka |
|--|---------|-------|
| 읽으면 | 메시지 사라짐 | 남아있음 |
| 여러 Consumer | 한 명만 가져감 | 각자 다 가져감 |
| 재처리 | 불가능 | 가능 |

---

## 관련 개념

- [[01. Event-Driven Architecture (기본 개념)]]
- [[03. Outbox Pattern (해결책)]]
- [[02. Redis]]

---

## Tags

#Kafka #MessageQueue #이벤트스트리밍
