CDC는 **DB 변경 사항을 실시간으로 감지해서 다른 시스템에 전달하는 방법**
DB의 트랜잭션 로그(binlog, WAL)를 읽어서 Kafka로 자동 발행

---

## 구조
```
┌──────────┐     ┌──────────┐     ┌───────┐
│ Database │ ──→ │ Debezium │ ──→ │ Kafka │
│ (binlog) │     │  (CDC)   │     │       │
└──────────┘     └──────────┘     └───────┘
```

---

## 직접 발행 vs CDC

| | 직접 발행 | CDC |
|--|----------|-----|
| 구현 | 코드에서 직접 | 인프라 설정 |
| 누락 가능성 | 실수 가능 | 자동이라 누락 없음 |
| 레거시 적용 | 코드 수정 필요 | 코드 수정 없이 가능 |

---

## Debezium 설정 예시

```json
{
  "name": "order-connector",
  "config": {
    "connector.class": "io.debezium.connector.mysql.MySqlConnector",
    "database.hostname": "localhost",
    "database.include.list": "order_db",
    "table.include.list": "order_db.orders"
  }
}
```

---

## 발행되는 이벤트

```json
{
  "before": null,
  "after": { "id": 1, "status": "CREATED" },
  "op": "c"  // c: create, u: update, d: delete
}
```

---

## 활용 사례

- Outbox + CDC (실시간 발행)
- 데이터 동기화 (DB → Elasticsearch, Redis)
- CQRS Read DB 동기화

---

## 대표 도구

| 도구 | 특징 |
|------|------|
| Debezium | 오픈소스, 가장 많이 사용 |
| AWS DMS | AWS 관리형 |
| Maxwell | MySQL 전용, 가벼움 |

---

## 관련 개념

- [[03. Outbox Pattern (해결책)]]
- [[05. Outbox + CDC]]

---

## Tags

#CDC #Debezium #EventDriven #데이터동기화
