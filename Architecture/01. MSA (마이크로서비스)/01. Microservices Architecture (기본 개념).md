MSA는 **서비스를 작은 단위로 분리하고, 각 서비스가 독립적으로 배포/운영되는 아키텍처**다.

---

## 모놀리식 vs MSA

```
모놀리식:
┌─────────────────────────────────┐
│         하나의 서비스            │
│  ┌──────┬──────┬──────┐        │
│  │ 주문 │ 결제 │ 배송 │         │
│  └──────┴──────┴──────┘        │
│          하나의 DB              │
└─────────────────────────────────┘

MSA:
┌─────────┐  ┌─────────┐  ┌─────────┐
│  주문   │  │  결제   │  │  배송   │
│ 서비스  │  │ 서비스  │  │ 서비스  │
│  (DB)   │  │  (DB)   │  │  (DB)   │
└─────────┘  └─────────┘  └─────────┘
```

---

## 특징

- 서비스별 독립 배포
- 서비스별 다른 기술 스택 가능
- 서비스별 DB 분리
- 장애 격리 (하나 죽어도 전체 안 죽음)

---

## 통신 방식

**동기 (REST, gRPC)** - 응답을 기다림
```
order-service ──HTTP──→ payment-service
```

**비동기 (Event-Driven)** - 응답 안 기다림
```
order-service ──이벤트──→ Kafka ──→ payment-service
```

---

## 언제 MSA?

| 모놀리식 | MSA |
|----------|-----|
| 팀 규모 작음 | 팀 규모 큼 (여러 팀) |
| 서비스 초기 단계 | 서비스가 충분히 성숙 |
| 빠른 MVP 개발 | 독립적 배포/확장 필요 |

처음부터 MSA는 오버엔지니어링. 보통 모놀리식 → 서비스 성장 → 점진적 MSA 전환.

---

## 핵심 구성 요소

| 구성 요소 | 역할 | 예시 |
|-----------|------|------|
| API Gateway | 단일 진입점, 인증, 라우팅 | Kong, Spring Cloud Gateway |
| Service Discovery | 서비스 위치 찾기 | Eureka, Consul |
| Circuit Breaker | 장애 전파 방지 | Resilience4j |
| Message Broker | 비동기 통신 | Kafka, RabbitMQ |

---

## 장단점

| 장점 | 단점 |
|------|------|
| 독립 배포 | 분산 시스템 복잡도 |
| 기술 스택 자유 | 서비스 간 통신 오버헤드 |
| 확장 용이 | 트랜잭션 관리 어려움 |
| 장애 격리 | 모니터링/디버깅 어려움 |

---

## 관련 개념

- [[02. API Gateway (진입점 관리)]]
- [[04. Service Discovery (서비스 디스커버리)]]
- [[05. Circuit Breaker Pattern (회로 차단기)]]
- [[01. Saga Pattern (분산 트랜잭션 기본)]]

---

## Tags

#MSA #Architecture #분산시스템
