API Gateway는 **모든 클라이언트 요청의 단일 진입점**

---

## 왜 필요한가

**Gateway 없이:**
- 클라이언트가 각 서비스 주소를 다 알아야 함
- 서비스마다 JWT 검증 로직 중복
- 서비스 추가될 때마다 클라이언트 수정

**Gateway 있으면:**
- 클라이언트는 Gateway 주소만 알면 됨
- 인증은 Gateway에서 한 번만
- 각 서비스는 비즈니스 로직에만 집중

```
Client → API Gateway → order-service
                    → payment-service
                    → delivery-service
```

---

## 주요 기능

| 기능 | 설명 |
|------|------|
| 라우팅 | `/orders` → order-service |
| 인증/인가 | JWT 검증, 권한 체크 |
| 로드밸런싱 | 여러 인스턴스에 트래픽 분산 |
| Rate Limiting | 요청 수 제한 |

---

## 라우팅 예시 (Spring Cloud Gateway)

```yaml
spring:
  cloud:
    gateway:
      routes:
        - id: order-service
          uri: http://order-service:8081
          predicates:
            - Path=/orders/**
```

---

## 주요 도구

| 도구 | 설명 |
|------|------|
| Spring Cloud Gateway | Spring 기반 |
| Kong | 오픈소스, 플러그인 풍부 |
| AWS API Gateway | AWS 관리형 |
| Nginx | 가볍고 빠름 |

---

## 실무 조합

**소규모:** Nginx만으로 충분 (라우팅, SSL, 로드밸런싱)

**대규모:** Nginx (앞단) + API Gateway (뒷단)
- Nginx: SSL 처리, 정적 파일
- Gateway: JWT 검증, 복잡한 필터

---

## SPOF 해결

Gateway가 단일 장애점이 될 수 있음 → 이중화로 해결

```
Client → Load Balancer → Gateway #1
                       → Gateway #2
```

---

## 장단점

| 장점 | 단점 |
|------|------|
| 클라이언트 단순화 | 단일 장애점 가능 |
| 공통 기능 집중 관리 | 병목 지점 될 수 있음 |

---

## 관련 개념

- [[01. Microservices Architecture (기본 개념)]]
- [[04. Service Discovery (서비스 디스커버리)]]

---

## Tags

#APIGateway #MSA #라우팅 #인증
