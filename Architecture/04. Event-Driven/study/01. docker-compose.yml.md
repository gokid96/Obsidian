```yaml
version: '3'
services:
  zookeeper:
    image: confluentinc/cp-zookeeper:7.4.4
    container_name: zookeeper
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181
      ZOOKEEPER_TICK_TIME: 2000
    ports:
      - "2181:2181"

  kafka:
    image: confluentinc/cp-kafka:7.4.4
    container_name: kafka
    depends_on:
      - zookeeper
    ports:
      - "9092:9092"
    environment:
      KAFKA_BROKER_ID: 1
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092
      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1

  redis:
    image: redis:alpine
    container_name: redis
    ports:
      - "6379:6379"
```

```
┌─────────────────┐
│  order-service  │
│    주문 생성     │
│   Port: 8081    │
└────────┬────────┘
         │
         ▼
┌─────────────────────────────────────────────────────┐
│                      Kafka                          │
│                  (order-topic)                      │
│                    Port: 9092                       │
└────────┬──────────────┬──────────────┬─────────────┘
         │              │              │
         ▼              ▼              ▼
┌─────────────┐  ┌─────────────┐  ┌─────────────┐
│   stock     │  │notification │  │  analytics  │
│  service    │  │  service    │  │  service    │
│  재고 차감   │  │  알림 발송   │  │  통계 수집   │
│ Port: 8082  │  │ Port: 8083  │  │ Port: 8084  │
└─────────────┘  └─────────────┘  └─────────────┘

─────────────────── 인프라 레이어 ───────────────────

┌─────────────┐  ┌─────────────┐
│  Zookeeper  │  │    Redis    │
│ Kafka 관리   │  │  캐시/락    │
│ Port: 2181  │  │ Port: 6379  │
└─────────────┘  └─────────────┘
```

```
[주문 요청] 
     │
     ▼
┌─────────────────────────────────────┐
│ order-service                       │
│                                     │
│  1. Redis에서 중복 주문 체크           │  ← Redis 사용
│  2. Redis에서 재고 캐시 조회           │  ← Redis 사용  
│  3. Kafka에 이벤트 발행                │
└─────────────────────────────────────┘
```