## **1. IP 주소 기본 개념**

### **IP 주소란?**

- **Internet Protocol Address**: 네트워크에서 장치를 식별하는 고유 주소
- **논리적 주소**: 물리적 위치와 관계없이 네트워크 구조에 따라 할당
- **계층적 구조**: 네트워크 부분 + 호스트 부분으로 구성

### **IP 주소의 역할**

- 패킷의 출발지와 목적지 식별
- 라우팅 경로 결정
- 네트워크 세분화 및 관리

---

## **2. IPv4 주소 체계**

### **IPv4 구조**

- **32비트** (4바이트) 주소
- **점 표기법**: 192.168.1.100
- **각 옥텟**: 0~255 (2⁸ = 256개)
- **총 주소 개수**: 2³² = 약 43억 개

### **IPv4 클래스 체계 (Classful)**

|클래스|범위|기본 서브넷 마스크|네트워크 수|호스트 수/네트워크|용도|
|---|---|---|---|---|---|
|A|1.0.0.0 ~ 126.0.0.0|255.0.0.0 (/8)|126개|16,777,214개|대형 조직|
|B|128.0.0.0 ~ 191.255.0.0|255.255.0.0 (/16)|16,384개|65,534개|중형 조직|
|C|192.0.0.0 ~ 223.255.255.0|255.255.255.0 (/24)|2,097,152개|254개|소형 조직|
|D|224.0.0.0 ~ 239.255.255.255|-|-|-|멀티캐스트|
|E|240.0.0.0 ~ 255.255.255.255|-|-|-|실험용|

### **특수 IP 주소**

```
사설 IP (Private IP):
- A클래스: 10.0.0.0 ~ 10.255.255.255
- B클래스: 172.16.0.0 ~ 172.31.255.255  
- C클래스: 192.168.0.0 ~ 192.168.255.255

특수 주소:
- 127.0.0.1: 루프백 (localhost)
- 0.0.0.0: 모든 네트워크 인터페이스
- 255.255.255.255: 제한된 브로드캐스트
- 169.254.x.x: APIPA (자동 사설 IP)
```

---

## **3. 서브넷 마스크**

### **서브넷 마스크의 역할**
- **네트워크 부분**과 **호스트 부분** 구분
- 라우터가 패킷 전달 경로 결정할 때 사용
- 네트워크를 더 작은 서브넷으로 분할

### **서브넷 마스크 표기법**

```
10진수 표기: 255.255.255.0
2진수 표기: 11111111.11111111.11111111.00000000
CIDR 표기: /24 (1의 개수)
```

### **서브넷 마스크 계산 예시**

**예시 1: 192.168.1.100/24**

```
IP 주소:        192.168.1.100   = 11000000.10101000.00000001.01100100
서브넷 마스크:   255.255.255.0   = 11111111.11111111.11111111.00000000
AND 연산:       192.168.1.0     = 11000000.10101000.00000001.00000000

결과:
- 네트워크 주소: 192.168.1.0
- 호스트 부분: 100
- 브로드캐스트: 192.168.1.255
```

### **다양한 서브넷 마스크**

| CIDR | 서브넷 마스크         | 네트워크 비트 | 호스트 비트 | 사용 가능 호스트 수 |
| ---- | --------------- | ------- | ------ | ----------- |
| /30  | 255.255.255.252 | 30      | 2      | 2개 (P2P 링크) |
| /29  | 255.255.255.248 | 29      | 3      | 6개          |
| /28  | 255.255.255.240 | 28      | 4      | 14개         |
| /27  | 255.255.255.224 | 27      | 5      | 30개         |
| /26  | 255.255.255.192 | 26      | 6      | 62개         |
| /25  | 255.255.255.128 | 25      | 7      | 126개        |
| /24  | 255.255.255.0   | 24      | 8      | 254개        |

---

## **4. 브로드캐스트 주소**

### **브로드캐스트란?**

- 네트워크 내 **모든 호스트**에게 데이터를 전송
- 호스트 부분이 **모두 1**인 주소
- 스위치가 모든 포트로 전달

### **브로드캐스트 종류**

```
1. 제한된 브로드캐스트 (Limited Broadcast)
   - 주소: 255.255.255.255
   - 범위: 로컬 네트워크 세그먼트만
   - 라우터가 전달하지 않음

2. 직접 브로드캐스트 (Directed Broadcast)  
   - 주소: 네트워크주소 + 호스트부분 모두 1
   - 예시: 192.168.1.255 (192.168.1.0/24 네트워크)
   - 특정 네트워크를 대상으로 함
```

### **브로드캐스트 계산 예시**

```
네트워크: 192.168.10.0/26

서브넷 분할:
- 192.168.10.0/26   → 브로드캐스트: 192.168.10.63
- 192.168.10.64/26  → 브로드캐스트: 192.168.10.127  
- 192.168.10.128/26 → 브로드캐스트: 192.168.10.191
- 192.168.10.192/26 → 브로드캐스트: 192.168.10.255
```

---

## **5. 서브네팅 (Subnetting) 실전**

### **서브네팅이 필요한 이유**

- IP 주소 절약
- 네트워크 성능 향상 (브로드캐스트 도메인 분리)
- 보안 강화
- 관리 효율성

### **서브네팅 계산 과정**

**문제**: 192.168.1.0/24를 4개 서브넷으로 나누기

**1단계: 필요한 서브넷 비트 계산**

```
4개 서브넷 = 2² 
→ 2비트 추가 필요
→ /24 + 2 = /26
```

**2단계: 새로운 서브넷 마스크**

```
기존: /24 = 255.255.255.0
새로운: /26 = 255.255.255.192
```

**3단계: 서브넷 분할**

```
서브넷 1: 192.168.1.0/26    (0~63)
- 네트워크: 192.168.1.0
- 사용가능: 192.168.1.1 ~ 192.168.1.62
- 브로드캐스트: 192.168.1.63

서브넷 2: 192.168.1.64/26   (64~127)
- 네트워크: 192.168.1.64  
- 사용가능: 192.168.1.65 ~ 192.168.1.126
- 브로드캐스트: 192.168.1.127

서브넷 3: 192.168.1.128/26  (128~191)
서브넷 4: 192.168.1.192/26  (192~255)
```

---

## **6. VLSM (Variable Length Subnet Mask)**

### **VLSM이란?**

- 하나의 네트워크를 **다양한 크기**로 분할
- **IP 주소 낭비 최소화**
- 실제 필요한 호스트 수에 맞게 할당

### **VLSM 설계 예시**

**요구사항**: 192.168.1.0/24로 다음 네트워크 구성

- 본사: 100대 (필요: 126개 IP)
- 지사A: 50대 (필요: 62개 IP)
- 지사B: 20대 (필요: 30개 IP)
- P2P 링크: 2개 (필요: 2개 IP × 2링크)

**설계 과정**:

```
1. 본사: /25 (126개) → 192.168.1.0/25
2. 지사A: /26 (62개) → 192.168.1.128/26  
3. 지사B: /27 (30개) → 192.168.1.192/27
4. P2P1: /30 (2개) → 192.168.1.224/30
5. P2P2: /30 (2개) → 192.168.1.228/30
```

---

## **7. 실무 팁과 계산 공식**

### **빠른 계산 공식**

```
호스트 수 = 2^(호스트 비트) - 2
서브넷 수 = 2^(추가 서브넷 비트)
서브넷 간격 = 256 - 서브넷마스크의 마지막 옥텟
```

### **자주 사용하는 서브넷 크기**

- **/30**: P2P 링크 (라우터 간 연결)
- **/29**: 소규모 서버팜 (6대)
- **/28**: 작은 사무실 (14대)
- **/27**: 중간 사무실 (30대)
- **/26**: 큰 사무실 (62대)
- **/24**: 일반적인 LAN (254대)

### **실무에서 주의사항**

- 네트워크 주소와 브로드캐스트 주소는 할당 불가
- 게이트웨이용 IP 1개 예약 (보통 첫 번째 또는 마지막)
- 향후 확장을 고려한 여유분 확보
- DHCP 풀 범위 미리 계획