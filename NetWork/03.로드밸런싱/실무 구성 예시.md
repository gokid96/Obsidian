### 8노드 클러스터

```
                    ┌─── API Server 1
        ┌─ L7 LB ───┼─── API Server 2
        │   (nginx) ├─── API Server 3
Client ─┤           └─── API Server 4
        │
        └─ L4 LB ───┬─── DB Primary
           (HAProxy)└─── DB Standby (Patroni)
```

### Nginx L7 설정 예시

```nginx
upstream api_servers {
    least_conn;
    server 10.0.0.1:8080 weight=3;
    server 10.0.0.2:8080 weight=3;
    server 10.0.0.3:8080 weight=2;
    server 10.0.0.4:8080 weight=2;
}

server {
    location /api {
        proxy_pass http://api_servers;
        proxy_connect_timeout 3s;
        proxy_read_timeout 30s;
    }
}
```

### HAProxy L4 설정 예시

```haproxy
frontend postgres_front
    bind *:5432
    default_backend postgres_back

backend postgres_back
    option tcp-check
    server db1 10.0.1.1:5432 check
    server db2 10.0.1.2:5432 check backup
```